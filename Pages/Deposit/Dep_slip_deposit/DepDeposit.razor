@* @page "/dept/deposit" *@
@page "/ws_dep_slip_deposit"
@using Newtonsoft.Json
@using Radzen.Blazor
@using System.Runtime.InteropServices.JavaScript
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.JSInterop
@inject IJSRuntime jsRuntime
@inject HttpClient httpClient
@using System.Linq.Dynamic.Core
@inject NotificationService NotificationService
@using System.Globalization
@using System.Text.Json
@using System.ComponentModel
@using System.ComponentModel.DataAnnotations
@using System.Text;

<style>
	.icon-search {
		display: inline-flex !important;
		justify-content: space-evenly !important;
		align-items: center !important;
		position: relative !important;
		top: 3px !important;
		padding: 15px !important;
		flex-wrap: nowrap !important;
	}

	.table > :not(caption) > * > * {
		padding: 0.2rem 0.2rem;
	}

	.save_top {
		border: #adacac solid 1px;
	}

	.header-right {
		text-align: start;
	}

	.header-left {
		text-align: end;
	}

	.rz-calendar .rz-inputtext {
		background-color: #e9ecef;
		opacity: 1;
	}

	.rz-fileupload-row {
		display: flex;
		color: transparent;
		align-items: center;
		justify-content: space-between;
		flex-direction: column-reverse;
	}

		.rz-fileupload-row img {
			width: 250px;
			max-width: 250px;
			margin-top: -4rem;
			max-height: 200px;
		}

		.rz-fileupload-row button {
			margin-left: 20rem;
			margin-top: 8px;
		}

	.rz-fileupload-files {
		background-color: var(--rz-upload-files-background-color);
		padding: var(--rz-upload-files-padding);
		margin-top: -1.5rem;
	}

	.rz-fileupload-buttonbar {
		position: relative;
		background-color: transparent;
		padding: var(--rz-upload-button-bar-padding);
		border-radius: var(--rz-upload-button-bar-border-radius);
	}

	.rz-card.rz-variant-filled {
		box-shadow: var(--rz-base-background-color);
		margin-top: -5px;
	}

	.rz-card {
		padding: 0;
		box-sizing: var(--rz-base-background-color);
	}

	.card {
		background-color: #f9f9f9;
	}

	tr:hover td {
		background-color: transparent;
	}

	td {
		text-align: left;
		padding: 2px;
	}

	.cashiput {
		color: #00CC00;
		background-color: black;
		text-align: right;
		font-size: 16px;
		font-weight: bold;
		width: 100%;
	}

		.cashiput::placeholder {
			color: #00CC00; /* สีที่คุณต้องการ */
		}

	.cashred::placeholder {
		color: red; /* สีที่คุณต้องการ */
	}
	.label-group {
		margin-left: 10px;
	}
</style>
<div class="header-page">
	<div class="row-header d-flex justify-content-between ">
		<div class="header-left">
			<h4>ระบบ เงินฝาก - ฝากเงิน @currentStep</h4>
		</div>
		@* <div class="header-right">
		<RadzenButton class="save_top" Icon="save" Text="Save" Click="@SaveDataAsync" />
		</div> *@
		<div class="header-right">
			@if (currentStep != 2)
			{
				<RadzenButton class="save_top" Icon="save"  Text="@((saveLoading ? "Saving..." : "Save"))" Click="@SaveDataAsync"
							  Disabled="@(!IsSaveEnabled)" />
			}
		</div>
	</div>
</div>
@* @if (isLoading)
{
	<div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; display: flex;background-color: #e9e9e9;opacity: 50%; justify-content: center; align-items: center; z-index: 90;">
		<div class="spinner-border text-primary" role="status">
			<span class="visually-hidden">Loading...</span>
		</div>
	</div>
}
else
{ *@

	<div class="card body-page">
		<div class="row mt-2" style="margin-left: calc(var(--bs-gutter-x) * .1);margin-bottom: 15px;">
			<RadzenSteps @bind-SelectedIndex="currentStep" Change="@OnChange" CanChange="@CanChange">
				<Steps>
					<RadzenStepsItem Disabled="@(currentStep == 3)" @bind-SelectedIndex="currentStep" Text="ทำรายการ" @onkeydown="OnKeyDownAsync">
						<RadzenRow>
							<RadzenText Text="ทำรายการ" />
						</RadzenRow>
						@if (datadetail == null)
						{
							@* <div class="card body-page"> *@
								<div class="row"  @onkeydown="OnKeyDownAsync" tabindex="0"  style="margin-left: calc(var(--bs-gutter-x) * -.21)">
									<div class="row">
										<div class="col-xl-4 col-md-4 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">เลขที่บัญชี</label>
											<div class="form-group ">
												<div class="input-group">
													@* <RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptno_format"
											Name="deptaccount_no" class="form-control"
											@onkeydown="@((e) => e.Code == "Enter" ? Search() : null)" /> *@
													<RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptno_format" 
																Name="deptaccount_no" class="form-control"@onkeydown="@(async (e) => { await HandleEnterKeyPress(e); await OnKeyDownAsync(e); })" />
													<div class="input-group-addon">
														<RadzenIcon class="icons icon-search" @onclick="GetDeptMaintype"  Icon="ballot"
																	data-bs-toggle="modal" data-bs-target="#ModalSearch" />
													</div>
												</div>
											</div>
											<div class="modal" tabindex="-1" id="ModalSearch">
												<div class="modal-dialog modal-xl">
													<div class="modal-content">
														<!-- Modal Header -->
														<div class="modal-header">
															<h4 class="modal-title">ข้อมูลสมาชิก</h4>
															<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
														</div>
														<!-- Modal body -->
														<div class="modal-body">
															<div class="row" style="margin-left:-4px;margin-right:-4px;">
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">ประเภทบัญชี</label>
																	@if (getDeptMaintype != null)
																	{
																		<select id="DeptMaintype" name="DeptMaintype" class="form-select"
																		@onchange="DeptMaintype">
																			<option value="null" selected>--กรุณาเลือก--</option>
																			@foreach (var MaintypeItem in getDeptMaintype)
																			{
																				<option value="@MaintypeItem.deptmain_type">
																					@MaintypeItem.deptmain_type - @MaintypeItem.deptmain_desc
																				</option>
																			}
																		</select>
																	}
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เลขที่บัญชี</label>
																	<div class="form-group ">
																		<div class="input-group">
																			@* <input class="form-control" type="text" name="emp_name"
																	@bind-value="deptaccount_no"> *@
																			<RadzenMask Mask="**-********" CharacterPattern="[0-9]"
																			@bind-value="deptaccount_No_fild" Name="deptaccount_No_fild"
																						class="form-control" />

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">ชื่อบัญชี :</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="emp_name"
																			@bind-value="deptaccount_name_fild">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">สถานะบัญชี</label>
																	<select class="form-select" @bind="deptclose_status"
																			>
																		<option Value="0">เปิดบัญชี</option>
																		<option Value="1">ปิดบัญชี</option>
																	</select>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เลขที่สมาชิก</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="memb_name"
																			@bind-value="member_no">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เลขพนักงาน</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="salary_id"
																			@bind-value="salary_id">
																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">ชื่อ</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="memb_name"
																			@bind-value="memb_name">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">นามสกุล</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="memb_surname"
																			@bind-value="memb_surname">
																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">บัตรประชาชน :</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="card_person"
																			@bind-value="card_person">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เบอร์โทรศัพท์ :</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="mem_telmobile"
																			@bind-value="mem_telmobile">
																		</div>
																	</div>
																</div>
																<div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
																	<button class="btn btn-outline-secondary"
																	@onclick="SearchOfGetAcc">
																		ค้นหา
																	</button>
																</div>
															</div>
															<RadzenDataGrid Data="@dataaccDetails" TItem="Models.AccountDetails" ColumnWidth="200px"
																			AllowFiltering="true" FilterPopupRenderMode="PopupRenderMode.OnDemand"
																			FilterMode="FilterMode.Advanced" IsLoading="@isLoadingModals" PageSize="10"
																			AllowPaging="true" AllowSorting="true" PagerHorizontalAlign="HorizontalAlign.Left"
																			ShowPagingSummary="true">
																<Columns>
																	<RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails"
																						  Title="เลขที่บัญชี" Property="deptaccount_no">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.deptaccount_no
																			</div>
																		</Template>
																	</RadzenDataGridColumn>

																	<RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails"
																						  Title="ชื่อบัญชี" Property="deptaccount_name">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.deptaccount_name
																			</div>
																		</Template>
																	</RadzenDataGridColumn>
																	<RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails"
																						  Title="เลขสมาชิก" Property="member_no">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.member_no
																			</div>
																		</Template>
																	</RadzenDataGridColumn>
																	<RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails"
																						  Title=" ชื่อ -นามสกุล" Property="full_name">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.full_name
																			</div>
																		</Template>
																	</RadzenDataGridColumn>
																</Columns>
															</RadzenDataGrid>

														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-xl-1 col-md-2 col-sm-6 d-flex flex-column">
											<button type="button" class="btn btn-outline-secondary" @onclick="PerformSearch">
											  @if (isLoading)
													{
														<span>...</span>
														<i class="fa fa-spinner fa-spin"></i>
													}
													else
													{
														<span>ค้นหา</span>
													}
													</button>
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ยอดทำรายการ</label>
											<div class="form-group ">
												<div class="input-group">
													<input type="text" id="" class="format-money form-control" style="text-align: end;"
													@bind="DeptslipAmt" placeholder="0.00" @onblur="OnBlurHandler" />

													<div class="input-group-addon">
														<RadzenIcon class="icons icon-search" Icon="ballot" data-bs-toggle="modal"
																	data-bs-target="#myModal1" onclick="OpenModal" />
													</div>
												</div>
											</div>
											<!-- The Modal -->
											<div class="modal" id="myModal1">
												<div class="modal-dialog modal-xl">
													<div class="modal-content">
														<!-- Modal Header -->
														<div class="modal-header">
															@* <h4 class="modal-title">ข้อมูลสมาชิก</h4> *@
															<button type="button" class="btn-close" data-bs-dismiss="modal" @onclick="ClearInputValues"></button>
														</div>
														<!-- Modal body -->
														<div class="modal-body">
															<div class="col-12" style="margin-top: -35px;">
																<table style="width: 100%;">
																	<tbody>
																		<tr style="border-top: 0px solid #dddddd !important;">
																			<td style="width:30%; text-align:center;background-color:#3CB371;color:White">
																				<span>จำนวนเงินในลิ้นชักรวม</span>
																			</td>
																			<td style="width:30%;text-align:center;background-color:#6495ED;color:White;border-right: 1px solid #dddddd;">
																				<span>ยอดรับ-จ่าย</span>
																			</td>
																			<td style="width:30%;text-align:center;background-color:#556B2F;color:White">
																				<span>เงินทอน</span>
																			</td>
																		</tr>
																		<tr>
																			<td>
																				<table style="width: 100%;margin-top: -55px;">
																					<tbody>
																						<tr style="border: transparent !important;">
																							<td style="border: transparent !important;">
																								<table style="margin-top: 0px; width: 100%;">
																									<tbody>
																										<tr>
																											<td width="35%">
																												<div>
																													<span style="font-size: 11px;">รายการ</span>
																												</div>
																											</td>
																											<td width="25%">
																												<div>
																													<span style="font-size: 11px;">จำนวน</span>
																												</div>
																											</td>
																											<td width="40%">
																												<div>
																													<span style="font-size: 11px;">จำนวนเงิน</span>
																												</div>
																											</td>
																										</tr>
																										<tr>
																											<td width="35%">
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 1,000 บาท</span>
																												</div>
																											</td>
																											<td width="25%">
																												<input name="" type="text" value="0" id="" readonly="readonly" autofocus="autofocus" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;">
																											</td>
																											<td width="40%">
																												<input name="" type="text" value="0.00" readonly="readonly" id="" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td width="35%">
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 500 บาท</span>
																												</div>
																											</td>
																											<td width="25%">
																												<input name="ctl00$ContentPlace$dsSave$FormView1$b_500" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_b_500" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td width="40%">
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_500" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_500" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 100 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$b_100" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_b_100" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_100" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_100" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 50 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$b_50" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_b_50" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_50" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_50" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 20 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$b_20" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_b_20" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_20" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_20" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 10 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$c_10" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_c_10" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_10" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_10" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 5 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$c_5" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_c_5" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_5" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_5" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right;font-size: 16px; font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 2 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$c_2" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_c_2" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_2" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_2" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;
                        font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 1 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$c_1" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_c_1" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_1" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_1" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;
                        font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 50 สตางค์</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$c_50" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_c_50" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_050" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_050" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;
                        font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 25 สตางค์</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$c_25" type="text" value="0" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_c_25" onkeypress="check_number();" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$amount_025" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_amount_025" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;
                        font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td width="15%" colspan="2" valign="middle">
																												<div>
																													<span style="font-size: 14px; height: 30px; line-height: 30px; vertical-align: middle;">
																														ยอดปรับปรุง
																													</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$ADJ_AMT" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_ADJ_AMT" title="#,##0.00" style="color:Red;background-color:Black;height: 30px; text-align: right;
                        font-size: 16px; font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																										<tr>
																											<td width="15%" colspan="2" valign="middle">
																												<div>
																													<span style="font-size: 14px; height: 40px; line-height: 40px; vertical-align: middle;">
																														รวม
																													</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsSave$FormView1$AMOUNT_BALANCE" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsSave_FormView1_AMOUNT_BALANCE" title="#,##0.00" style="color:White;background-color:Black;height: 40px; text-align: right;
                        font-size: 16px; font-weight: bold;width: 100%; ">
																											</td>
																										</tr>
																									</tbody>
																								</table>
																							</td>
																						</tr>
																					</tbody>
																				</table>

																			</td>
																			<td style="border-right: 1px solid #dddddd;">
																				<table style="width: 100%;margin-top: 0px;;">
																					<tbody>
																						<tr style="border: transparent !important;">
																							<td style="border: transparent !important;">
																								<table style="margin-top: 0px; width: 100%;">
																									<tbody>
																										<tr>
																											<td width="35%">
																												<div>
																													<span style="font-size: 11px;">รายการ</span>
																												</div>
																											</td>
																											<td width="25%">
																												<div>
																													<span style="font-size: 11px;">จำนวน</span>
																												</div>
																											</td>
																											<td width="40%">
																												<div>
																													<span style="font-size: 11px;">จำนวนเงิน</span>
																												</div>
																											</td>
																										</tr>
																										<tr>
																											<td width="35%">
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 1,000 บาท</span>
																												</div>
																											</td>
																											<td width="25%">
																												<input name="" type="text" @bind="CH_B1000" placeholder="0" @onblur="MoneyDetail"
																													   style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td width="40%">
																												<input name="" class="cashiput" type="text" @bind="amount_1000" placeholder="0.00" readonly="readonly"
																													   style="">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 500 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_B500" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_500" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 100 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_B100" title="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_100" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 50 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_B50" valuetitle="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_50" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 20 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_B20" valuetitle="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_20" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 10 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_C10" valuetitle="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_10" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 5 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_C5" valutitle="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_5" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right;font-size: 16px; font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 2 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_C2" valutitle="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_2" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 1 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_C1" valutitle="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_1" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 50 สตางค์</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_C50" title="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_050" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 25 สตางค์</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0" @bind="CH_C25" title="#,##0" @onblur="MoneyDetail" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold; width: 100%;  ">
																											</td>
																											<td>
																												<input name="" class="cashiput" type="text" @bind="amount_025" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td width="15%" colspan="2" valign="middle">
																												<div>
																													<span style="font-size: 14px; height: 30px; line-height: 30px; vertical-align: middle;">
																														ยอดปรับปรุง
																													</span>
																												</div>
																											</td>
																											<td>
																												<input name="" class="cashred" @bind="adj_total" type="text" placeholder="0.00" readonly="readonly" title="#,##0.00" style="color:Red;background-color:Black;height: 30px; text-align: right;font-size: 16px; font-weight: bold; width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td width="15%" colspan="2" valign="middle">
																												<div>
																													<span style="font-size: 14px; height: 30px; line-height: 30px; vertical-align: middle;">
																														ยอดปรับปรุงสตางค์
																													</span>
																												</div>
																											</td>
																											<td>
																												<input name="" class="cashred" @bind="adj_amount" type="text" placeholder="0.00" title="#,##0.00" onfocus="this.select()" style="color:Red;background-color:Black;height: 30px; text-align: right;font-size: 16px; font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td width="15%" colspan="2" valign="middle">
																												<div>
																													<span style="font-size: 14px; height: 40px; line-height: 40px; vertical-align: middle;">
																														รวม
																													</span>
																												</div>
																											</td>
																											<td>
																												<input name="" type="text" placeholder="0.00" readonly="readonly" @bind="AMOUNT_BALANCEE" title="#,##0.00" style="color:White;background-color:Black;height: 40px; text-align: right;font-size: 16px; font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																									</tbody>
																								</table>
																								<span>
																									<input type="button" name="" class="cashiput" value="ตกลง" onclick="javascript:__doPostBack('ctl00$ContentPlace$dsMain$FormView1$b_confirm','')" style="color:White;background-color:#8FBC8F;float: left; width: 50%; height: 25px">
																								</span><span>
																									<input type="button" name="" class="cashiput" value="ยกเลิก" onclick="javascript:__doPostBack('ctl00$ContentPlace$dsMain$FormView1$b_cancel','')" style="color:White;background-color:IndianRed;width: 48%; height: 25px">
																								</span>
																							</td>
																						</tr>
																					</tbody>
																				</table>
																			</td>
																			<td style="border-right: 1px solid #dddddd;">
																				<table id="" style="width: 100%;margin-top: -40px;">
																					<tbody>
																						<tr style="border: transparent !important;">
																							<td style="border: transparent !important;">
																								<table style="margin-top: 0px; width: 100%;">
																									<tbody>
																										<tr>
																											<td width="35%">
																												<div>
																													<span style="font-size: 11px;">รายการ</span>
																												</div>
																											</td>
																											<td width="25%">
																												<div>
																													<span style="font-size: 11px;">จำนวน</span>
																												</div>
																											</td>
																											<td width="40%">
																												<div>
																													<span style="font-size: 11px;">จำนวนเงิน</span>
																												</div>
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 1,000 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_B1000" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_B1000" tabindex="14" title="#,##0" autofocus="autofocus" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_1000" type="text" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_1000" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 500 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_B500" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_B500" tabindex="15" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_500" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_500" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 100 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_B100" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_B100" tabindex="16" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_100" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_100" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 50 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_B50" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_B50" tabindex="17" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_50" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_50" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">ธนบัตร 20 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_B20" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_B20" tabindex="18" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_20" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_20" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 10 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_C10" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_C10" tabindex="19" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_10" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_10" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 5 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_C5" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_C5" tabindex="20" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_5" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_5" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right;font-size: 16px; font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 2 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_C2" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_C2" tabindex="21" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_2" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_2" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 1 บาท</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_C1" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_C1" tabindex="22" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_1" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_1" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 50 สตางค์</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_C50" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_C50" tabindex="23" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_050" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_050" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td>
																												<div>
																													<span style="font-size: 11px;">เหรียญ 25 สตางค์</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$CH_C25" type="text" value="0" id="ctl00_ContentPlace_dsChange_FormView1_CH_C25" tabindex="24" title="#,##0" style="background: rgb(255, 250, 205); text-align: right; font-size: 14px; font-weight: bold;width: 100%;">
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$amount_025" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_amount_025" title="#,##0.00" style="color:#00CC00;background-color:Black;text-align: right; font-size: 16px;font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td width="15%" colspan="2" valign="middle">
																												<div>
																													<span style="font-size: 14px; height: 30px; line-height: 30px; vertical-align: middle;">
																														ยอดปรับปรุง
																													</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$ADJ_AMT" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_ADJ_AMT" title="#,##0.00" style="color:Red;background-color:Black;height: 30px; text-align: right;font-size: 16px; font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																										<tr>
																											<td width="15%" colspan="2" valign="middle">
																												<div>
																													<span style="font-size: 14px; height: 40px; line-height: 40px; vertical-align: middle;">
																														รวม
																													</span>
																												</div>
																											</td>
																											<td>
																												<input name="ctl00$ContentPlace$dsChange$FormView1$AMOUNT_BALANCE" type="text" value="0.00" readonly="readonly" id="ctl00_ContentPlace_dsChange_FormView1_AMOUNT_BALANCE" title="#,##0.00" style="color:White;background-color:Black;height: 40px; text-align: right;font-size: 16px; font-weight: bold;width: 100%;">
																											</td>
																										</tr>
																									</tbody>
																								</table>
																								<span>
																									<input type="button" name="ctl00$ContentPlace$dsChange$FormView1$b_calChange" value="คำนวณเงินทอน" onclick="javascript:__doPostBack('ctl00$ContentPlace$dsChange$FormView1$b_calChange','')" id="ctl00_ContentPlace_dsChange_FormView1_b_calChange" tabindex="12" style="color:White;background-color:DarkOliveGreen;float: left; width: 100%; height: 25px">
																								</span>
																							</td>
																						</tr>
																					</tbody>
																				</table>
																			</td>
																		</tr>

																	</tbody>
																</table>
															</div>
															<!-- Modal footer -->
															<div class="modal-footer">
																<button type="button" class="btn btn-danger" data-bs-dismiss="modal" @onclick="ClearInputValues">
																	Close
																</button>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									
								</div>
							@* </div> *@
						}
						else
						{
							@foreach (var item in datadetail)
							{
								var Item = item.deptSlip;
								<div class="row" @onkeydown="OnKeyDownAsync" tabindex="0" style="margin-left: calc(var(--bs-gutter-x) * -.21);margin-bottom: 15px;">
									<div class="row">
										<div class="col-xl-3 col-md-4 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">เลขที่บัญชี</label>
											<div class="form-group ">
												<div class="input-group">
													<RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptno_format "
																Name="deptaccount_no" class="form-control" @onkeydown="@HandleEnterKeyPress" />
													<div class="input-group-addon">
														<RadzenIcon class="icons icon-search" @onclick="GetDeptMaintype" Icon="ballot"
																	data-bs-toggle="modal" data-bs-target="#anotherModal" />
													</div>
												</div>
											</div>
											<div class="modal" tabindex="-1" id="anotherModal">
												<div class="modal-dialog modal-xl">
													<div class="modal-content">
														<!-- Modal Header -->
														<div class="modal-header">
															<h4 class="modal-title">ข้อมูลสมาชิก</h4>
															<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
														</div>
														<!-- Modal body -->
														<div class="modal-body">
															<div class="row" style="margin-left:-4px;margin-right:-4px;">
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">ประเภทบัญชี</label>
																	@if (getDeptMaintype != null)
																	{
																		<select id="DeptMaintype" name="DeptMaintype" class="form-select"
																		@onchange="DeptMaintype">
																			<option value="null" selected>--กรุณาเลือก--</option>
																			@foreach (var MaintypeItem in getDeptMaintype)
																			{
																				<option value="@MaintypeItem.deptmain_type">
																					@MaintypeItem.deptmain_type - @MaintypeItem.deptmain_desc
																				</option>
																			}
																		</select>
																	}
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เลขที่บัญชี</label>
																	<div class="form-group ">
																		<div class="input-group">
																			@* <input class="form-control" type="text" name="emp_name"
																@bind-value="deptaccount_no"> *@
																			<RadzenMask Mask="**-********" CharacterPattern="[0-9]"
																			@bind-value="deptaccount_No_fild" Name="deptaccount_no"
																						class="form-control" />

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">ชื่อบัญชี :</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="deptaccount_name_fild"
																			@bind-value="deptaccount_name_fild">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="f>orm-label" for="">สถานะบัญชี</label>
																	<select class="form-select" @bind="deptclose_status">
																			
																		<option Value="0">เปิดบัญชี</option>
																		<option Value="1">ปิดบัญชี</option>
																	</select>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เลขที่สมาชิก</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="memb_name"
																			@bind-value="member_no">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เลขพนักงาน</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="salary_id"
																			@bind-value="salary_id">
																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">ชื่อ</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="memb_name"
																			@bind-value="memb_name">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">นามสกุล</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="memb_surname"
																			@bind-value="memb_surname">
																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">บัตรประชาชน :</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="card_person"
																			@bind-value="card_person">

																		</div>
																	</div>
																</div>
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">เบอร์โทรศัพท์ :</label>
																	<div class="form-group ">
																		<div class="input-group">
																			<input class="form-control" type="text" name="mem_telmobile"
																			@bind-value="mem_telmobile">
																		</div>
																	</div>
																</div>
																<div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
																	<button class="btn btn-outline-secondary"
																	@onclick="SearchOfGetAcc">
																		ค้นหา
																	</button>
																</div>
															</div>
															<RadzenDataGrid Data="@dataaccDetails" TItem="Models.AccountDetails"
																			ColumnWidth="200px" AllowFiltering="true"
																			FilterPopupRenderMode="PopupRenderMode.OnDemand"
																			FilterMode="FilterMode.Advanced" IsLoading="@isLoadingModals" PageSize="10"
																			AllowPaging="true" AllowSorting="true"
																			PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true">
																<Columns>
																	<RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails"
																						  Title="เลขที่บัญชี" Property="deptaccount_no">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.deptaccount_no
																			</div>
																		</Template>
																	</RadzenDataGridColumn>

																	<RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails"
																						  Title="ชื่อบัญชี" Property="deptaccount_name">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.deptaccount_name
																			</div>
																		</Template>
																	</RadzenDataGridColumn>
																	<RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails"
																						  Title="เลขสมาชิก" Property="member_no">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.member_no
																			</div>
																		</Template>
																	</RadzenDataGridColumn>
																	<RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails"
																						  Title=" ชื่อ -นามสกุล" Property="full_name">
																		<Template>
																			<div @onclick="@(e => UpdateAccountDetails(context))"
																				 data-bs-dismiss="modal">
																				@context.full_name
																			</div>
																		</Template>
																	</RadzenDataGridColumn>
																</Columns>
															</RadzenDataGrid>

														</div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-xl-1 col-md-2 col-sm-6 d-flex flex-column">
											<button type="button" class="btn btn-outline-secondary" @onclick="PerformSearch">
											  @if (isLoading)
													{
														<span>...</span>
														<i class="fa fa-spinner fa-spin"></i>
													}
													else
													{
														<span>ค้นหา</span>
													}
													</button>
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">รายการ</label>
											<select id="recppaytypeSelect" name="recppaytype_code" class="form-select"
											@onchange="RecpPayTypeChanged">

												@if (Item.recppaytype == null || !Item.recppaytype.Any())
												{
													<option selected disabled></option>
												}
												else
												{
													@foreach (var recppaytypeItem in Item.recppaytype)
													{
														 isCurrentOptionSelected = (recppaytypeItem.recppaytype_code == Item.recppaytype_code || recppaytypeItem.recppaytype_code == recpPayTypeCode);
														if (recppaytypeItem.genvc_flag == 1)
														{
															<option value="@($"{recppaytypeItem.cash_type}|{recppaytypeItem.tofrom_accid}_{recppaytypeItem.recppaytype_code}_{recppaytypeItem.cash_type}_{recppaytypeItem.recppaytype_desc}")"
																	selected="@isCurrentOptionSelected">
																@recppaytypeItem.recppaytype_code - @recppaytypeItem.recppaytype_desc
															</option>
														}
													}
												}

											</select>
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">วันที่</label>
											@* <input class="form-control" type="text" DateFormat="dd/MM/yyyy" name="operate_date"
								@bind="Item.operate_date" /> *@
											<RadzenDatePicker @bind-Value=@Item.operate_date Name="operate_date" ReadOnly
																  DateFormat="dd/MM/yyyy" />
											</div>
											<!-- The Modal -->
											<div class="modal" id="anotherModal">
												<div class="modal-dialog modal-xl">
													<div class="modal-content">
														<!-- Modal Header -->
														<div class="modal-header">
															<h4 class="modal-title">ข้อมูลสมาชิก</h4>
															<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
														</div>
														<!-- Modal body -->
														<div class="modal-body">
															<div class="row">
																<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																	<label class="form-label" for="">ชื่อ</label>
																	<div class="form-group ">
																		<div class="input-group">
																			@* <input class="form-control" type="text" name="emp_name"
															@bind="emp_name">
															*@
																		</div>
																	</div>
																</div>
															</div>
															<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																<label class="form-label" for="">นามสกุล</label>
																<div class="form-group ">
																	<div class="input-group">
																		@* <input class="form-control" type="text"
														name="emp_surname"@bind="emp_surname"> *@
																	</div>
																</div>
															</div>
															<div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
																@* <button type="button" class="btn
												btn-outline-secondary"@onclick="SearchModals">ค้นหา</button> *@
															</div>
														</div>
														@* @if (employeeData != null)
										{ *@
														<table id="example" class="table mt-2" style="width:100%">
															<thead>
																<tr>
																	<th>เลขที่สมาชิก</th>
																	<th>ชื่อ</th>
																	<th>นามสกุล</th>
																	<th>ชื่อเล่น</th>
																	<th>เลขบัตรประชาชน</th>
																</tr>
															</thead>
															@* @foreach (var Itemmodal in employeeData)
											{
											<tbody>
											<tr>
											<td><a style="cursor: pointer;"
											@onclick="() => OpenModal(Itemmodal.emp_no)">@Itemmodal.emp_no</a></td>
											<td>@Itemmodal.emp_name</td>
											<td>@Itemmodal.emp_surname</td>
											<td>@Itemmodal.emp_nickname</td>
											<td>@Itemmodal.id_card</td>
											</tr>
											</tbody>
											} *@
														</table>

														<!-- Modal footer -->
														<div class="modal-footer">
															<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
														</div>
														@* } *@
													</div>
												</div>
											</div>
										</div>
										<div class="row">
											<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
												<label class="form-label" for="">เลขสมุด</label>
												<RadzenMask Mask="**********" CharacterPattern="[0-9]" @bind-value="Item.deptpassbook_no"
															Name="deptaccount_no" class="form-control" />
											</div>
											<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
												<label class="form-label" for="">ชื่อบัญชี</label>
												<RadzenTextBox class="form-control" type="text" readonly Name="deptaccount_name"
												@bind-value="Item.deptaccount_name" />
											</div>
											<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
												<label class="form-label" for="">ประเภทบัญชี</label>
												<RadzenTextBox class="form-control" readonly type="text" Name="depttype_code"
												@bind-value="Item.depttype_desc" />
											</div>
										</div>
										<div class="row">
											<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
												<label class="form-label" for="">เพื่อ</label>
												<RadzenTextBox class="form-control" readonly type="text" Name="dept_objective"
												@bind-value="Item.dept_objective" />
											</div>
											<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
												<label class="form-label" for="">ประเภทเงิน</label>
												<input class="form-control" readonly type="text" name="cash_type"
													   value="@(cashTypeValue == null ? Item.moneytype_code : cashTypeValue)" />
											</div>
											<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
												<label class="form-label" for="">รหัสคู่บัญชี</label>
												@* <select id="tofromaccSelect" class="form-select" @bind="selectedValue"> *@
												<select id="tofromaccSelect" class="form-select" value="@bookCode" @onchange="OnToFromAccChanged">
													@if (Item.tofromacc == null || !Item.tofromacc.Any())
												{
													<option selected disabled>--กรุณาเลือก--</option>
												}
												else
												{
													<option selected disabled>--กรุณาเลือก--</option>
													@foreach (var tofromaccItem in Item.tofromacc)
													{
														bool isCashTypeSelected = (tofromaccItem.cash_type == cashTypeValue);
														bool isItemAccIdSelected = (tofromaccItem.tofrom_accid == Item.tofrom_accid);
														bool isCurrentOptionSelected = (tofromaccItem.tofrom_accid == valuetoFromaccId);
														if (isCashTypeSelected)
														{
															// เลือก <option> เมื่อ isCashTypeSelected เป็น true
															if (valuetoFromaccId == null|| toFromaccId2 == null)
															{
																<option value="@($"{tofromaccItem.cash_type}|{tofromaccItem.tofrom_accid}|{tofromaccItem.tofrom_accdesc}")"
																		selected="@isCurrentOptionSelected">
																	@tofromaccItem.tofrom_accid - @tofromaccItem.tofrom_accdesc<p>@toFromaccId2:@valuetoFromaccId</p>
																</option>
															}
															else
															{
																<option value="@($"{tofromaccItem.cash_type}|{tofromaccItem.tofrom_accid}|{tofromaccItem.tofrom_accdesc}")"
																		selected="@isCurrentOptionSelected">
																	@tofromaccItem.tofrom_accid - @tofromaccItem.tofrom_accdesc<p>2</p>
																</option>
															}
														}
														else if (isItemAccIdSelected)
														{
															// เลือก <option> เมื่อ isItemAccIdSelected เป็น true
															if (valuetoFromaccId == null|| toFromaccId2 == null)
															{
																<option value="@($"{tofromaccItem.cash_type}|{tofromaccItem.tofrom_accid}|{tofromaccItem.tofrom_accdesc}")"
																		selected="@isItemAccIdSelected">
																	@tofromaccItem.tofrom_accid - @tofromaccItem.tofrom_accdesc<p>3</p>
																</option>
															}
															else
															{
																<option value="@($"{tofromaccItem.cash_type}|{tofromaccItem.tofrom_accid}|{tofromaccItem.tofrom_accdesc}")"
																		selected="@isItemAccIdSelected">
																	@tofromaccItem.tofrom_accid - @tofromaccItem.tofrom_accdesc<p>4</p>
																</option>
															}
														}
													}
												}
											</select>
										</div>
										<!-- The Modal -->
										<div class="modal" id="myModal">
											<div class="modal-dialog modal-xl">
												<div class="modal-content">
													<!-- Modal Header -->
													<div class="modal-header">
														<h4 class="modal-title">ข้อมูลสมาชิก</h4>
														<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
													</div>
													<!-- Modal body -->
													<div class="modal-body">
														<div class="row">
															<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																<label class="form-label" for="">ชื่อ</label>
																<div class="form-group ">
																	<div class="input-group">
																		@* <input class="form-control" type="text" name="emp_name"
															@bind="emp_name">
															*@
																	</div>
																</div>
															</div>
															<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
																<label class="form-label" for="">นามสกุล</label>
																<div class="form-group ">
																	<div class="input-group">
																		@* <input class="form-control" type="text"
															name="emp_surname"@bind="emp_surname"> *@
																	</div>
																</div>
															</div>
															<div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
																@* <button type="button" class="btn
													btn-outline-secondary"@onclick="SearchModals">ค้นหา</button> *@
															</div>
														</div>
														@* @if (employeeData != null)
											{ *@
														<table id="example" class="table mt-2" style="width:100%">
															<thead>
																<tr>
																	<th>เลขที่สมาชิก</th>
																	<th>ชื่อ</th>
																	<th>นามสกุล</th>
																	<th>ชื่อเล่น</th>
																	<th>เลขบัตรประชาชน</th>
																</tr>
															</thead>
															@* @foreach (var Itemmodal in employeeData)
												{
												<tbody>
												<tr>
												<td><a style="cursor: pointer;"
												@onclick="() => OpenModal(Itemmodal.emp_no)">@Itemmodal.emp_no</a></td>
												<td>@Itemmodal.emp_name</td>
												<td>@Itemmodal.emp_surname</td>
												<td>@Itemmodal.emp_nickname</td>
												<td>@Itemmodal.id_card</td>
												</tr>
												</tbody>
												} *@
														</table>

														<!-- Modal footer -->
														<div class="modal-footer">
															<button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
														</div>
														@* } *@
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">คงเหลือ</label>
											<input class="form-control" readonly style="text-align: end;" type="text" Name="prncbal"
											@bind-value="Item.prncbal" />
										</div>
										<div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ทำรายการโดย</label>
											<select class="form-select" @bind="nobook_flag">
												<option Value="0">มีสมุด</option>
												<option Value="1">ไม่มีสมุด</option>
											</select>
										</div>
										<div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">อ้างอิงรายการ</label>
											<div class="form-group ">
												<div class="input-group">
													<RadzenTextBox class="form-control" type="text" Name="refer_slipno"
													@bind-Value="refer_slipno" />
													<div class="input-group-addon">
														<RadzenIcon class="icons icon-search" Icon="ballot" data-bs-toggle="modal"
																	data-bs-target="#myModal" />
													</div>
												</div>
											</div>
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ยอดทำรายการ</label>
											<div class="form-group ">
												<div class="input-group">
													<input type="text" class="format-money form-control" style="text-align: end;"
													@bind="DeptslipAmt" placeholder="0.00" @onblur="FormatNumber" />

													<div class="input-group-addon">
														<RadzenIcon class="icons icon-search" Icon="ballot" data-bs-toggle="modal"
																	data-bs-target="#myModal1" />
													</div>
												</div>
											</div>
											<!-- The Modal -->
											<div class="modal" id="myModal1">
												<div class="modal-dialog modal-xl">
													<div class="modal-content">
														<!-- Modal Header -->
														<div class="modal-header">
															@* <h4 class="modal-title">ข้อมูลสมาชิก</h4> *@
															<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
														</div>
														<!-- Modal body -->
														<div class="modal-body">
															<div class="col-12">
																<div class="row">
																	<div class="col-4">
																		<table>
																			<tr>
																				<td style="width:400px;height:22px; text-align:center;background-color:#3CB371;color:White">
																					<span>จำนวนเงินในลิ้นชักรวม</span>
																				</td>
																				<td></td>
																				<td></td>
																			</tr>
																			<tr>
																				<td>รายการ</td>
																				<td>จำนวน</td>
																				<td>จำนวนเงิน</td>
																			</tr>
																		</table>
																	</div>
																	<div class="col-4">
																		<table>
																			<tr>
																				<td style="width:400px;text-align:center;background-color:#6495ED;color:White">
																					<span>ยอดรับ-จ่าย</span>
																				</td>
																				<td></td>
																				<td></td>
																			</tr>
																			<tr>
																				<td>รายการ</td>
																				<td>จำนวน</td>
																				<td>จำนวนเงิน</td>
																			</tr>
																		</table>
																	</div>
																	<div class="col-4">
																		<table>
																			<tr>
																				<td style="width:400px;text-align:center;background-color:#556B2F;color:White">
																					<span>เงินทอน</span>
																				</td>
																				<td></td>
																				<td></td>
																			</tr>
																			<tr>
																				<td>รายการ</td>
																				<td>จำนวน</td>
																				<td>จำนวนเงิน</td>
																			</tr>
																		</table>
																	</div>
																</div>
															</div>

															<!-- Modal footer -->
															<div class="modal-footer">
																<button type="button" class="btn btn-danger" data-bs-dismiss="modal">
																	Close
																</button>
															</div>

														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">คงเหลือสูงสุด</label>
											<input class="form-control" style="text-align: end;" readonly type="text" Name="withdrawable_amt"
											@bind-value="Item.withdrawable_amt" />
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">หมายเหตุ</label>
											<input class="form-control" type="text" Name="remark" @bind-value="@Item.remark" />
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ยอดสุทธิ</label>
											<input class="format-money form-control" placeholder="0.00" type="text"
												   style="text-align: end; font-size: 40px;" readonly name="deptslip_netamt" @bind="DeptslipAmt"
												   id="showNumber" />
										</div>
									</div>
									<div class="row mt-button">
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ยอดฝากได้</label>
											<input class="form-control" style="text-align: end;" placeholder="0.00" readonly type="text"
												   Name="deptmax_amt" @bind="deptmax_amt" />
										</div>
									</div>
								</div>
								@if (recpPayTypeCode == "DEN")
								{

									<div class="row mt-5">
										<div class="col-12">
											<div class="row">
												<div class="col-2" style="text-align: end;">
													<h4>รายการเช็ค:</h4>
												</div>
												<div class="col-4">
													<button class="btn btn-outline-primary" style="border: solid 1px #d1d1d1;"
													@onclick="AddRow">
														เพิ่มแถว
													</button>
												</div>
											</div>
										</div>
										<div class=" mt-1">
											<div class="row mt-2">
												<div class="col-12">
													<table class="table table-bordered" style="width: 100%;">
														<thead>
															<tr>
																<th style="text-align: center;width:10%;background-color: rgb(166, 207, 243);">
																	เลขที่เช็ค
																</th>
																<th style="text-align: center;width:13%;background-color: rgb(166, 207, 243);">
																	วันที่หน้าchq
																</th>
																<th style="text-align: center;width:8%;background-color: rgb(166, 207, 243);">
																	รหัส
																</th>
																<th style="text-align: center;width:20%;background-color: rgb(166, 207, 243);">
																	ธนาคาร
																</th>
																<th style="text-align: center;width:8%;background-color: rgb(166, 207, 243);">
																	รหัส
																</th>
																<th style="text-align: center;width:20%;background-color: rgb(166, 207, 243);">
																	สาขา
																</th>
																<th style="text-align: center;width:3%;background-color: rgb(166, 207, 243);"></th>
																<th style="text-align: center;width:15%;background-color: rgb(166, 207, 243);">
																	จำนวนเงิน
																</th>
																<th style="text-align: center;width:3%;background-color: rgb(166, 207, 243);">
																	ลบ
																</th>
															</tr>
														</thead>
														<tbody>
															@if (rows != null && rows.Count > 0)
															{
																@foreach (var row in rows)
																@* @for (var index = 0; index < rows.Count; index++) *@
																{
																	<tr>
																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: center; border: solid 1px #fff;"
																				   placeholder="0" type="text" @bind="row.cheque_no" />
																		</td>
																		<td>
																			<RadzenDatePicker class="inputrPicker" @bind-Value=row.cheque_date
																							  Name="operate_date" DateFormat="dd/MM/yyyy" />
																		</td>
																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: center; border: solid 1px #fff;" type="text"
																			@bind-value="row.bank_code" @oninput="OnGetBankChanged" />
																		</td>
																		<td>
																			<select id="getBankSelect" class="form-select"
																			@onchange="OnGetBankSelectChanged">
																				<option selected disabled>--กรุณาเลือก--</option>
																				@foreach (var getBankItem in getBank)
																				{
																					bool isCurrentOptionSelected = getBankItem.bank_code == row.bank_code;
																					<option value="@getBankItem.bank_code" selected="@isCurrentOptionSelected">
																						@getBankItem.bank_code - @getBankItem.bank_desc
																					</option>
																				}
																			</select>
																			@* <RadzenDropDown @ref="radzenDropDown" @bind-SearchText="searchText"
													FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
													FilterOperator="StringFilterOperator.StartsWith" AllowFiltering="true"
													Data="@getBank" TextProperty="bank_desc" ValueProperty="bank_code"
													AllowClear="true" @bind-Value="selectedCustomer"
													Style="width: 100%; max-width: 400px;" /> *@

																		</td>

																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: center; border: solid 1px #fff;" type="text"
																			@bind="row.branch_id" />

																		</td>
																		<td>
																			<select class="form-select">
																				<option selected disabled>--กรุณาเลือก--</option>
																				@foreach (var bankBranchItem in bankBranch)
																				{
																					bool isCurrentOptionSelected = bankBranchItem.branch_id == row.branch_id;
																					<option value="@bankBranchItem.branch_id"
																							selected="@isCurrentOptionSelected">
																						@bankBranchItem.branch_id - @bankBranchItem.branch_name
																					</option>
																				}
																			</select>
																		</td>
																		<td>
																			<RadzenIcon style="width:100%" class="icons icon-search" Icon="ballot"
																						data-bs-toggle="modal" data-bs-target="#myModal1" />
																		</td>
																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: end;border: solid 1px #fff;"
																				   placeholder="0.00" onblur="formattNumberr(this)" type="text"
																			@bind="row.cheque_amt" />
																		</td>
																		<td style="width:100%">
																			<button class="btn btn-outline-danger"
																			@onclick="() => RemoveRow(row)">
																				ลบ
																			</button>
																		</td>
																	</tr>
																}
															}
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
								}
							}
						}
					</RadzenStepsItem>
					<RadzenStepsItem Disabled="@(currentStep == 3)" Text="ตรวจสอบรายการ">
						<RadzenRow>
							<RadzenText Text="ตรวจสอบรายละเอียด" />
						</RadzenRow>
						@if (datadetail != null)
						{
							@foreach (var item in datadetail)
							{
								var Item = item.deptSlip;
								<div class="row" style="margin-left: calc(var(--bs-gutter-x) * -.21);margin-bottom: 15px;">
									<div class="row">
										<div class="col-xl-2 col-md-4 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">เลขที่บัญชี</label>
											<div class="form-group ">
												<div class="label-group">
													<div class="input-group-addon">
														<RadzenText Text="@deptno_format" />
													</div>
												</div>
											</div>
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">รายการ</label>
											<div class="form-group ">
												<div class="input-group">
													@if (selectedRecppaytype == null)
													{
														<select id="recppaytypeSelect" name="recppaytype_code" style="background-color:transparent; border-color: transparent;--bs-form-select-bg-img:url();" disabled class="form-select"
														@onchange="RecpPayTypeChanged">
															@if (Item.recppaytype == null || !Item.recppaytype.Any())
															{
																<option selected disabled></option>
															}
															else
															{
																<option selected disabled></option>
																@foreach (var recppaytypeItem in Item.recppaytype)
																{
																	if (recppaytypeItem.recppaytype_code == Item.recppaytype_code)
																	{
																		isCurrentOptionSelected = true;

																	}
																	else
																	{
																		isCurrentOptionSelected = false;
																	}
																	if (recppaytypeItem.genvc_flag == 1)
																	{
																		<option value="@($"{recppaytypeItem.cash_type}|{recppaytypeItem.tofrom_accid}_{recppaytypeItem.recppaytype_code}_{recppaytypeItem.cash_type}_{recppaytypeItem.recppaytype_desc}")"
																				selected="@isCurrentOptionSelected">
																			@recppaytypeItem.recppaytype_code - @recppaytypeItem.recppaytype_desc
																		</option>
																	}
																}
															}
														</select>
													}
													else
													{
														<RadzenText Text="@selectedRecppaytype" />
													}
												</div>
											</div>
										</div>
										<div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ประเภทเงิน</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.moneytype_code" />
												</div>
											</div>
										</div>
										<div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">วันที่</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@String.Format("{0:dd/MM/yyyy}", Item.operate_date)" />

												</div>
											</div>

										</div>
									</div>
									<div class="row">
										@* <div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">เลขสมุด</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.deptpassbook_no" />
												</div>
											</div>
										</div> *@
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ประเภทบัญชี</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.depttype_desc" />
												</div>
											</div>
										</div>
									
										@* <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">เพื่อ</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.dept_objective" />
												</div>
											</div>
										</div> *@
										
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">รหัสคู่บัญชี</label>
											<div class="form-group ">
												<div class="input-group">
													<select id="tofromaccSelect" class="form-select" value="@bookCode"
															style="background-color:transparent; border-color: transparent;--bs-form-select-bg-img:url();" disabled @onchange="OnToFromAccChanged">
														@if (Item.tofromacc == null || !Item.tofromacc.Any())
														{
															<option selected disabled>--กรุณาเลือก--</option>
														}
														else
														{
															<option selected disabled>--กรุณาเลือก--</option>
															@foreach (var tofromaccItem in Item.tofromacc)
															{
																isCurrentOptionSelected = true;

																@if (tofromaccItem.cash_type == cashTypeValue)
																{
																	<option value="@($"{tofromaccItem.cash_type}|{tofromaccItem.tofrom_accid}")"
																			selected="@isCurrentOptionSelected">
																		@tofromaccItem.tofrom_accid - @tofromaccItem.tofrom_accdesc
																	</option>
																}
																else if (tofromaccItem.tofrom_accid == Item.tofrom_accid)
																{
																	<option value="@($"{tofromaccItem.cash_type}|{tofromaccItem.tofrom_accid}")"
																			selected="@isCurrentOptionSelected">
																		@tofromaccItem.tofrom_accid - @tofromaccItem.tofrom_accdesc
																	</option>
																}
															}
														}
													</select>
												</div>
											</div>
										</div>
										<div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ชื่อบัญชี</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.deptaccount_name" />
												</div>
											</div>
										</div>

										<div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">คงเหลือ</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.prncbal?.ToString()" />
												</div>
											</div>
										</div>
										@* <div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ทำรายการโดย</label>
											<select class="form-select" @bind="nobook_flag" style="background-color:transparent; border-color: transparent;--bs-form-select-bg-img:url();" disabled>
												<option Value="0">มีสมุด</option>
												<option Value="1">ไม่มีสมุด</option>
											</select>
										</div> *@
										@if (nobook_flag.ToString() == "0")
{
										<div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">อ้างอิงรายการ</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText  Text="@Item.refer_slipno" />
												</div>
											</div>
										</div>
										}
										<div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ยอดทำรายการ</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText  Text="@(DeptslipAmt?.ToString()  ?? "0")" />
												</div>
											</div>
										</div>
										@* <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">คงเหลือสูงสุด</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.withdrawable_amt?.ToString()" />
												</div>
											</div>
										</div> *@
										@* <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">หมายเหตุ</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@Item.remark" />
												</div>
											</div>
										</div> *@
										<div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ยอดสุทธิ</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText  Text="@(DeptslipAmt?.ToString()  ?? "0")" />
												</div>
											</div>
										</div>
										@* <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
											<label class="form-label" for="">ยอดฝากได้</label>
											<div class="form-group ">
												<div class="label-group">
													<RadzenText Text="@deptmax_amt?.ToString()" />
												</div>
											</div>
										</div> *@
									</div>
								</div>
								@if (recpPayTypeCode == "TRB")
								{

									<div class="row mt-5">
										<div class="col-12">
											<div class="row">
												<div class="col-2" style="text-align: end;">
													<h4>รายการเช็ค:</h4>
												</div>
												<div class="col-4">
													<button class="btn btn-outline-primary" style="border: solid 1px #d1d1d1;"
													@onclick="AddRow">
														เพิ่มแถว
													</button>
												</div>
											</div>
										</div>
										<div class=" mt-1">
											<div class="row mt-2">
												<div class="col-12">
													<table class="table table-bordered" style="width: 100%;">
														<thead>
															<tr>
																<th style="text-align: center;width:10%;background-color: rgb(166, 207, 243);">
																	เลขที่เช็ค
																</th>
																<th style="text-align: center;width:13%;background-color: rgb(166, 207, 243);">
																	วันที่หน้าchq
																</th>
																<th style="text-align: center;width:8%;background-color: rgb(166, 207, 243);">
																	รหัส
																</th>
																<th style="text-align: center;width:20%;background-color: rgb(166, 207, 243);">
																	ธนาคาร
																</th>
																<th style="text-align: center;width:8%;background-color: rgb(166, 207, 243);">
																	รหัส
																</th>
																<th style="text-align: center;width:20%;background-color: rgb(166, 207, 243);">
																	สาขา
																</th>
																<th style="text-align: center;width:3%;background-color: rgb(166, 207, 243);"></th>
																<th style="text-align: center;width:15%;background-color: rgb(166, 207, 243);">
																	จำนวนเงิน
																</th>
																<th style="text-align: center;width:3%;background-color: rgb(166, 207, 243);">
																	ลบ
																</th>
															</tr>
														</thead>
														<tbody>
															@if (rows != null && rows.Count > 0)
															{
																@foreach (var row in rows)
																@* @for (var index = 0; index < rows.Count; index++) *@
																{
																	<tr>
																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: center; border: solid 1px #fff;"
																				   placeholder="0" type="text" @bind="row.cheque_no" />
																		</td>
																		<td>
																			<RadzenDatePicker class="inputrPicker" @bind-Value=row.cheque_date
																							  Name="operate_date" DateFormat="dd/MM/yyyy" />
																		</td>
																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: center; border: solid 1px #fff;" type="text"
																			@bind-value="row.bank_code" @oninput="OnGetBankChanged" />
																		</td>
																		<td>
																			<select id="getBankSelect" class="form-select"
																			@onchange="OnGetBankSelectChanged">
																				<option selected disabled>--กรุณาเลือก--</option>
																				@foreach (var getBankItem in getBank)
																				{
																					bool isCurrentOptionSelected = getBankItem.bank_code == row.bank_code;
																					<option value="@getBankItem.bank_code" selected="@isCurrentOptionSelected">
																						@getBankItem.bank_code - @getBankItem.bank_desc
																					</option>
																				}
																			</select>
																			@* <RadzenDropDown @ref="radzenDropDown" @bind-SearchText="searchText"
													FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
													FilterOperator="StringFilterOperator.StartsWith" AllowFiltering="true"
													Data="@getBank" TextProperty="bank_desc" ValueProperty="bank_code"
													AllowClear="true" @bind-Value="selectedCustomer"
													Style="width: 100%; max-width: 400px;" /> *@

																		</td>

																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: center; border: solid 1px #fff;" type="text"
																			@bind="row.branch_id" />

																		</td>
																		<td>
																			<select class="form-select">
																				<option selected disabled>--กรุณาเลือก--</option>
																				@foreach (var bankBranchItem in bankBranch)
																				{
																					bool isCurrentOptionSelected = bankBranchItem.branch_id == row.branch_id;
																					<option value="@bankBranchItem.branch_id"
																							selected="@isCurrentOptionSelected">
																						@bankBranchItem.branch_id - @bankBranchItem.branch_name
																					</option>
																				}
																			</select>
																		</td>
																		<td>
																			<RadzenIcon style="width:100%" class="icons icon-search" Icon="ballot"
																						data-bs-toggle="modal" data-bs-target="#myModal1" />
																		</td>
																		<td>
																			<input class="form-control"
																				   style="width:100%;text-align: end;border: solid 1px #fff;"
																				   placeholder="0.00" onblur="formattNumberr(this)" type="text"
																			@bind="row.cheque_amt" />
																		</td>
																		<td style="width:100%">
																			<button class="btn btn-outline-danger"
																			@onclick="() => RemoveRow(row)">
																				ลบ
																			</button>
																		</td>
																	</tr>
																}
															}
														</tbody>
													</table>
												</div>
											</div>
										</div>
									</div>
								}
							}
						}
					</RadzenStepsItem>
					@* <RadzenStepsItem Disabled="@(currentStep != 2)" Text="เสร็จสิ้น" Last="true"> *@
					<RadzenStepsItem Disabled="@(currentStep == 3)"  Text="เสร็จสิ้น" Last="true">
						<RadzenRow>
							<RadzenText Text="ประวัติทำรายการ" />
						</RadzenRow>
						<RadzenButton class="save_top" Icon="print" Text="พิมพ์" Click="@PrintPdf" />
						<RadzenButton class="save_top" Icon="print" Text="พิมพ์ book_" Click="@PrintBook_" />
							@* @foreach (var content in printbook_data)
							{
								var printDetail = content.print_detail;
								foreach (var rowDetail in printDetail)
								{
									<table style='margin-top: 20px;'>
										 <thead>
										</thead>
										<tbody>
											<tr style='margin-top:20px;'>
												@foreach (var columnDetail in rowDetail.row_detail)
												 {
												<input type='text' style='text-align: @(columnDetail.align); margin-top: @(columnDetail.point_top)px; margin-left: @(columnDetail.point_left)%; width: @(columnDetail.point_width)%; height:30%;vertical-align: top; font-family: @(columnDetail.font_name); font-size: @(columnDetail.font_size)px;' value='@columnDetail.column_value' />
												}
											</tr>
										</tbody>
									</table>
								}
							} *@
								<div class="row mt-2"
			 style="margin-left: calc(var(--bs-gutter-x) * .1);margin-right: calc(var(--bs-gutter-x) * .5);margin-bottom: 15px;">
							<RadzenDataGrid Data="@statementDetails" TItem="Models.Statement_list" ColumnWidth="200px"
										AllowFiltering="true" FilterPopupRenderMode="PopupRenderMode.OnDemand"
										FilterMode="FilterMode.Advanced" IsLoading="@isLoadingModals" PageSize="10" AllowPaging="true"
										AllowSorting="true" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true"> 
							<Columns>
								<RadzenDataGridColumn Width="10%" TItem="Models.Statement_list" Title="ลำดับ" Property="coop_id">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn  Width="13%" TItem="Models.Statement_list" Title="วันที่"
													  Property="operate_date">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn Width="13%" TItem="Models.Statement_list" Title="รายการ"
													  Property="deptitemtype_code">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn Width="17%" TItem="Models.Statement_list" Title="ถอน"
													  Property="withdraw_amt">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn Width="17%" TItem="Models.Statement_list" Title="ฝาก"
													  Property="deposit_amt">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn Width="17%" TItem="Models.Statement_list" Title="ยอดคงเหลือ"
													  Property="prncbal">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn Width="12%" TItem="Models.Statement_list" Title="พิมพ์ Book" Property="item_status">
									<Template Context="data">
								    @if (data.item_status == 1)
									{
									<div style="text-align: center;">พิมพ์</div>
									}else{
									<div style="background-color: rgb(190, 5, 5); color: white; text-align: center;">ไม่พิมพ์</div>
									}
									</Template>
								</RadzenDataGridColumn>
							</Columns>
						</RadzenDataGrid>
								</div>
						@* <RadzenButton class="save_top" Icon="print" Text="พิมพ์" Click="@(() => PrintPdf(deptslip_no))" /> *@
					</RadzenStepsItem>
				</Steps>
			</RadzenSteps>
		</div>
	</div>
	<div class="card body-page">
		<div class="from">
		</div>
		
	</div>
	<div class="card mt-4" hidden="@(currentStep == 1 ||currentStep == 2 )">
		<div class="row mt-2"
			 style="margin-left: calc(var(--bs-gutter-x) * .5);margin-right: calc(var(--bs-gutter-x) * .5);margin-bottom: 15px;">
			<RadzenTabs @bind-SelectedIndex=@selectedIndex>
				<Tabs>
					<RadzenTabsItem Text="รายละเอียดต้นเงิน">
						<RadzenDataGrid Data="@dataaccDetails" TItem="Models.AccountDetails" ColumnWidth="200px"
										AllowFiltering="true" FilterPopupRenderMode="PopupRenderMode.OnDemand"
										FilterMode="FilterMode.Advanced" IsLoading="@isLoadingModals" PageSize="10" AllowPaging="true"
										AllowSorting="true" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true">
							<Columns>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ต้นเงิน" Property="prnc_no">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ต้นเงินคงเหลือ"
													  Property="prnc_bal">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ยอดเงินทำรายการ"
													  Property="prncslip_amt">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="วันที่ต้นเงิน"
													  Property="prnc_date">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="วันครบกำหนด"
													  Property="prncdue_date">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="วันเริ่มคิดด/บถึง"
													  Property="calint_from">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ด/บ จ่าย" Property="calint_to">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ภาษี" Property="intpay_amt">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ด/บ.หลังหักภาษี"
													  Property="taxpay_amt">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ด/บค้าง" Property="intslip_net">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ค่าปรับ"
													  Property="intbf_accyear">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ด/บ เรียกคืน"
													  Property="int_return">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="ภาษี เรียกคืน"
													  Property="tax_return">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="อัตราดอกเบี้ย"
													  Property="interest_rate">
								</RadzenDataGridColumn>
								<RadzenDataGridColumn TItem="Models.AccountDetails" Title="จำนวนวัน" Property="day_cal">
								</RadzenDataGridColumn>
							</Columns>
						</RadzenDataGrid>
					</RadzenTabsItem>
					<RadzenTabsItem Text="ลายเซ็น">
						<div class="col-xl-12 col-md-6 col-sm-6 d-flex flex-column" style="text-align: center;">
							<label class="form-label" for="">กำหนดสำหรับอ้างถึง</label>
							<div class="row">
								<RadzenCard Style="background-color: transparent;">
									<RadzenUpload @ref="upload" Auto="false" Multiple="true" Url="upload/multiple"
												  Change=@(args => OnChange(args, "Manual Upload")) Progress=@(args =>
											  OnProgress(args, "Manual Upload")) class="w-100" />
								</RadzenCard>
							</div>
						</div>
					</RadzenTabsItem>
				</Tabs>
			</RadzenTabs>
		</div>
	</div>

@* } *@

<script>
	$(document).ready(function () {
		var previous_data;
		$(".format-money").on('focus', function () {
			previous_data = this.value;
		}).change(function () {
			var item_amt = this.value;
			item_amt = formatNumber(Number(item_amt.replace(/[^0-9.-]+/g, "")));
			this.value = item_amt; // ต้องกำหนดค่ากลับไปให้ฟิลด์
		});
	});

	function formattNumber(input) {
		let anotherInput = document.getElementById('showNumber');
		let value = input.value.replace(/[^0-9.]/g, '');
		let number = parseFloat(value);
		if (!isNaN(number)) {
			let formattedValue = number.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
			input.value = formattedValue;
			anotherInput.value = formattedValue;
			console.log(formattedValue);
		} else {
			input.value = '';
		}
	}
	function formattNumberr(input) {
		let value = input.value.replace(/[^0-9.]/g, '');
		let number = parseFloat(value);
		if (!isNaN(number)) {
			let formattedValue = number.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
			input.value = formattedValue;
		} else {
			input.value = '';
		}
	}
</script>
<script>
	window.preventNonNumericInput = (element) => {
		element.addEventListener('keypress', function (e) {
			if (!/[\d.]/.test(e.key)) {
				e.preventDefault();
			}

			if (e.key === '.' && element.value.includes('.')) {
				e.preventDefault();
			}
		});
	}
</script>
@code {

    private async Task PrintPdf()
    {
        // รับ HTML จาก GetPdfData()
        string htmlData = await GetPdfData();
        // เรียกใช้ JavaScript Interop เพื่อแปลง HTML เป็น PDF และพิมพ์
        await jsRuntime.InvokeVoidAsync("printPdf", htmlData); 

    }
   private async Task<string> GetPdfData()
    {
        var InputHtml = $@"</head>
		 <style>
			.form-control {{
                border: solid 1px #fff;
			}}
			.form-label{{
                font - weight: normal;
			}}
			.form-select {{

            font - size: 16px; /* ขนาดตัวอักษร */
            background-color: #fff;
        	}}
			.row {{
                --bs - gutter - x: 1.5rem; 
				--bs-gutter-y: 0;
				display: flex;
				flex-wrap: wrap;
				margin-top: calc(var(--bs-gutter-y)* -1);
				 /*margin-right: calc(var(--bs-gutter-x)* -0.5); 
				margin-left: calc(var(--bs-gutter-x)* -0.5); */
			}}
			.left-align-no-border {{
						text-align: left;
						padding: 1px;
			}}
			@page {{
						size: A4;
						margin: 5px;
			}}
		</style>
		<body style='margin-top:-30px'>
			<div class='row' style='width: 100%;'>";
			foreach (var content  in statement_data)
			{
				foreach (var item in content.slip_data){
				@* Console.WriteLine($"slipdata : {item.column_name},{item.column_value},{item.point_top},{item.point_left},{item.point_width},{item.point_height},{item.align},{item.valign},{item.font_name},{item.font_size},"); *@
					InputHtml += $@"
					<div style=' width: {item.point_width}%; margin-top: {item.point_top}px;'>
							<lable style='text-align: {item.align}; margin-top: {item.point_top}px; margin-left: {item.point_left}%; width: {item.point_width}%; vertical-align: top; font-family: {item.font_name}; font-size: {item.font_size}px;'>{item.column_value}</lable>
					</div>";
				}
			}
			InputHtml += @"
			</div>
		</body>";
		return InputHtml;
	}

  private async Task PrintBook_()
    {
        // รับ HTML จาก GetPdfData()
        string htmlData = await GetPrintBookData();
        // เรียกใช้ JavaScript Interop เพื่อแปลง HTML เป็น PDF และพิมพ์
        await jsRuntime.InvokeVoidAsync("printBook", htmlData); 
    }
	 private async Task<string> GetPrintBookData()
    {
        var InputHtml = $@"
		<style>
			.body {{
            font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
        }}
		.left-align-no-border {{
			text-align: left;
			padding: 0px;
		}}
		.tablept{{
			width:100%;
			/* border:1px solid; */
			margin-left:-5px;
		}}
		@page {{
			size: A4;
			margin: 0px;
		}}
		 @page :first {{
        	margin-top: -10;
    	}}
		</style>
		
		</head>
		<body>
			<div class='row account-book' style='width:100%;'>";
				@foreach (var content in printbook_data)
							{
								var printDetail = content.print_detail;
								foreach (var rowDetail in printDetail)
								{
									 InputHtml += $@"<table table class='tablept'>
										 <thead>
											<tr>";
											InputHtml += @"</tr>
										</thead>
										<tbody>
											<tr>";
												@foreach (var columnDetail in rowDetail.row_detail)
												{
													 InputHtml += $@" 
													 <input type='text' style='text-align: {columnDetail.align}; margin-top: {columnDetail.point_top}px; margin-left: {columnDetail.point_left}%; width: {columnDetail.point_width}%; height:{columnDetail.point_height}%; vertical-align: top; font-family: {columnDetail.font_name}; font-size: {columnDetail.font_size}px; border: 0px solid ;' value='{columnDetail.column_value}' />";
												}
												InputHtml += @"</tr>
										</tbody>
								</table>";
								}
							}
			InputHtml += @"
			</div>
		</body>";
		return InputHtml;
	}
	// Event handler for RadzenSteps change
	private bool IsSaveEnabled => SaveStatus == "1";

	private void OnChange(int newStep)
	{
		currentStep = newStep;
		StateHasChanged();
		@if (currentStep == 2)
		{
			// PrintPdf(deptslip_no);
		}
	}

	// Event handler for RadzenSteps CanChange
	private bool CanChange()
	{
		Console.WriteLine($"return true;{true}");
		return true;
	}
	private string searchText;
	int selectedIndex = 0;
	private Models.GetBank selectedCustomer;

	private RadzenDropDown<Models.GetBank> radzenDropDown;
	IList<IDictionary<string, object>> accDetails; // Assuming this is your original data
	public IEnumerable<Models.AccountDetails> dataaccDetails { get; set; }
	public IEnumerable<Models.Statement_list> statementDetails { get; set; }
	private List<TableRow> rows = new List<TableRow>();
	private List<string> bankValuesList = new List<string>();

	public class TableRow
	{
		public string? cheque_no { get; set; }
		public DateTime? cheque_date = DateTime.Now;
		public DateTime? entry_time { get; set; }
		public DateTime? chequedue_date { get; set; }
		public string? cheque_type { get; set; }
		public decimal? cheque_amt { get; set; }
		public int? seq_no { get; set; }
		public int? checkclear_status { get; set; }
		public string bank_code { get; set; }
		public string bank_desc { get; set; }
		public string bank_name_e { get; set; }
		public string bank_shortname_t { get; set; }
		public string branch_id { get; set; }
		public string branch_name { get; set; }
	}
	private bool isLoadingSave;

	private void OnInitialized()
	{
		AddRow();
		StateHasChanged();
		@if (currentStep == 2)
		{
			@* PrintPdf(deptslip_no); *@
		}
		@* OnKeyDownAsync(e); *@
	}
	public async Task NextStep()
    {
        // เพิ่มค่า currentStep ทีละหนึ่ง
        @* currentStep++; *@
        currentStep = 1;
    }

    @* private async Task OnKeyDownAsync(KeyboardEventArgs e)
	{
		if (e.Key == "F9")
		{
			currentStep = 1;
		}
	} *@
	private void AddRow()
	{
		@* rows.Add(new TableRow()); *@
		try
		{
			isLoadingSave = true;
			var newRow = new TableRow
				{
					cheque_no = rows.Count > 0 ? rows[0].cheque_no : "0",
					cheque_date = rows.Count > 0 ? rows[0].cheque_date : DateTime.Now,
					bank_code = rows.Count > 0 ? rows[0].bank_code : "000",
					branch_id = rows.Count > 0 ? rows[0].branch_id : "0000",
				};
			rows.Add(newRow);
			ShowNotification(new NotificationMessage
				{
					Severity = NotificationSeverity.Success,
					Summary =
					"Success",
					Detail = "เพิ่มแถวเรียบร้อย",
					Duration = 1500
				});
		}
		catch (Exception ex)
		{
			isLoadingSave = false;
			ShowNotification(new NotificationMessage
				{
					Severity = NotificationSeverity.Error,
					Summary =
					"Error",
					Detail = ex.Message,
					Duration = 5000
				});
			Console.WriteLine(ex.Message.ToString());
		}
		finally
		{
			isLoadingSave = false;

		}

	}
	private void RemoveRow(TableRow row)
	{
		try
		{
			isLoadingSave = true;
			rows.Remove(row);
			ShowNotification(new NotificationMessage
				{
					Severity = NotificationSeverity.Success,
					Summary =
					"Success",
					Detail = "ลบเรียบร้อย",
					Duration = 1500
				});
		}
		catch (Exception ex)
		{
			isLoadingSave = false;
			ShowNotification(new NotificationMessage
				{
					Severity = NotificationSeverity.Error,
					Summary =
					"Error",
					Detail = ex.Message,
					Duration = 5000
				});
			Console.WriteLine(ex.Message.ToString());
		}
		finally
		{
			isLoadingSave = false;

		}

	}
	private string BankBranchValues { get; set; }
	private string BankValues { get; set; }
	private async Task OnBankBranchChanged(ChangeEventArgs e)
	{
		BankBranchValues = e.Value.ToString();
	}
	private void OnBankBranchSelectChanged(ChangeEventArgs e)
	{
		// กำหนดค่าที่ถูกเลือกใน <select> ให้กับ row.bank_code
		bankbranch_code = e.Value.ToString();
		BankBranchValues = bankbranch_code;
	}
	private async Task OnGetBankChanged(ChangeEventArgs e)
	{
		BankValues = e.Value.ToString();
		Console.WriteLine($"BankValues: {BankValues}");
	}
	private void OnGetBankSelectChanged(ChangeEventArgs e)
	{
		// กำหนดค่าที่ถูกเลือกใน <select> ให้กับ row.bank_code
		bank_code = e.Value.ToString();
		Console.WriteLine($"BankValues: {bank_code}");
		BankValues = bank_code;

	}
	RadzenUpload upload;

	int progress;
	bool showProgress;
	private string file_name;

	bool showComplete;
	string completionMessage;
	bool cancelUpload = false;

	void CompleteUpload(UploadCompleteEventArgs args)
	{
		if (!args.Cancelled)
			completionMessage = "Upload Complete!";
		else
			completionMessage = "Upload Cancelled!";

		showProgress = false;
		showComplete = true;
	}


	void TrackProgress(UploadProgressArgs args)
	{
		showProgress = true;
		showComplete = false;
		@* progress = args.Progress; *@

		// cancel upload
		args.Cancel = cancelUpload;

		// reset cancel flag
		cancelUpload = false;
	}

	void CancelUpload()
	{
		cancelUpload = true;
	}

	int customParameter = 1;
	void OnChange(UploadChangeEventArgs args, string name)
	{
		foreach (var file in args.Files)
		{
			Console.WriteLine($"File: {file.Name} / {file.Size} bytes");
			file_name = file.Name;
		}
		Console.WriteLine($"{file_name} changed");
	}

	void OnProgress(UploadProgressArgs args, string name)
	{
		Console.WriteLine($"{args.Progress}% '{name}' / {args.Loaded} of {args.Total} bytes.");

		if (args.Progress == 100)
		{
			foreach (var file in args.Files)
			{
				Console.WriteLine($"Uploaded: {file.Name} / {file.Size} bytes");
			}
		}
	}

	void OnComplete(UploadCompleteEventArgs args)
	{
		Console.WriteLine($"Server response: {args.RawResponse}");
	}
}
@* @code {
// ตัวแปรสำหรับเก็บค่าที่เลือกใน dropdown แรก
private string selectedValue;
private string cashTypeValue;


// Event handler สำหรับ dropdown แรก
private void RecpPayTypeChanged(ChangeEventArgs e)
{
// เมื่อมีการเปลี่ยนแปลงค่าใน dropdown แรก
// ให้กำหนดค่าที่เลือกใน dropdown ที่สองเป็นค่าเดียวกัน
selectedValue = e.Value.ToString();
ShowCashType();
}

private void ShowCashType()
{
cashTypeValue = selectedValue;
}

private string deptslipAmt;
private async Task CheckNumber(KeyboardEventArgs e)
{
int e_k = e.Key[0]; // ดึงค่า char แรกจาก Key

// 13 = Enter, 46 = .
if (e_k != 13 && e_k != 46 && (e_k < 48 || e_k > 57))
{
// ไม่ให้ผ่านค่าเข้ามา
await jsRuntime.InvokeVoidAsync("alert", "กรุณากรอกเฉพาะตัวเลขเท่านั้น!");
}
}
} *@
