@page "/ws_dep_editdept"
@using FinanceApp.Models;
@using Newtonsoft.Json
@using Radzen.Blazor
@using System.Runtime.InteropServices.JavaScript
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Web
@using Microsoft.JSInterop
@inject IJSRuntime jsRuntime
@inject HttpClient httpClient
@using System.Linq.Dynamic.Core
@inject NotificationService NotificationService
@using System.Globalization
@using System.Text.Json
@using System.ComponentModel
@using Microsoft.AspNetCore.Components
@inject Services.Api_Provider ApiProvider
@inject Services.GetUserDataList GetuUerData
<style>
    .icon-search {
        display: inline-flex !important;
        justify-content: space-evenly !important;
        align-items: center !important;
        position: relative !important;
        top: 3px !important;
        padding: 15px !important;
        flex-wrap: nowrap !important;
    }

    .table> :not(caption)>*>* {
        padding: 0.2rem 0.2rem;
    }

    .save_top {
        border: #adacac solid 1px;
    }

    .header-right {
        text-align: start;
    }

    .header-left {
        text-align: end;
    }

    .rz-fileupload-row {
        display: flex;
        color: transparent;
        align-items: center;
        justify-content: space-between;
        flex-direction: column-reverse;
    }

    .rz-fileupload-row img {
        width: 250px;
        margin-top: -4rem;
        max-height: 200px;
    }

    .rz-fileupload-row button {
        margin-left: 20rem;
        margin-top: 8px;
    }

    .rz-fileupload-files {
        background-color: var(--rz-upload-files-background-color);
        padding: var(--rz-upload-files-padding);
        margin-top: -1.5rem;
    }

    .rz-fileupload-buttonbar {
        position: relative;
        background-color: transparent;
        padding: var(--rz-upload-button-bar-padding);
        border-radius: var(--rz-upload-button-bar-border-radius);
    }

    .rz-card.rz-variant-filled {
        box-shadow: var(--rz-base-background-color);
        margin-top: -5px;
    }

    .rz-card {
        padding: 0;
        box-sizing: var(--rz-base-background-color);
    }

    .card {
        background-color: #f9f9f9;
    }

    .rz-calendar .rz-inputtext {
        background-color: #e9ecef;
        opacity: 1;
    }

    .label-group {
        margin-left: 10px;
    }

    .form-label-preview {
        margin-bottom: 0.1rem;
        margin-top: 5px;
        font-size: 19px;
    }

    .header-title-row {
    @*border-bottom:1px#e4dbdbsolid;*@@*margin-top:0px;*@margin-bottom: 20px;
    }

    .section-title {
        display: block;
        /* ทำให้บล็อกครอบคลุมความกว้างทั้งหมด */
        font-weight: bold;
        /* กำหนดฟอนต์ให้ตัวหนา */
        border-bottom: 2px solid rgb(208, 204, 204);
        /* เส้นใต้ */
        padding-bottom: 5px;
        /* ระยะห่างระหว่างข้อความกับเส้น */
        margin-left: -15px;
        font-weight: 600;
        width: 40%;
    }
</style>
<div class="header-page">
    <div class="row-header d-flex justify-content-between ">
        <div class="header-left">
            <h4>ระบบ เงินฝาก - บัญชีเงิรฝากสมาชิก</h4>
        </div>
        <div class="header-right">
            @* <RadzenButton class="save_top" Icon="save" Text="Save" Click="@SaveDataAsync" /> *@
        </div>
    </div>
</div>
<div class="card body-page">
    <div class="row mt-2" style="margin-left: calc(var(--bs-gutter-x) * .1);margin-bottom: 15px;">
        <div class="row" tabindex="0" style="margin-left: calc(var(--bs-gutter-x) * -.21)">
            <div class="row">
                <div class="col-xl-4 col-md-4 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">เลขที่บัญชี</label>
                    <div class="form-group ">
                        <div class="input-group">
                            <RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptaccount_no"
                                Name="deptaccount_no" class="form-control" />
                            <div class="input-group-addon">
                                <RadzenIcon class="icons icon-search" Icon="ballot" data-bs-toggle="modal"
                                    data-bs-target="#ModalSearch" />
                            </div>
                        </div>
                    </div>
                    @* <div class="modal" tabindex="-1" id="ModalSearch">
                    <div class="modal-dialog modal-xl">
                    <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header">
                    <h4 class="modal-title">ข้อมูลสมาชิก</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <!-- Modal body -->
                    <div class="modal-body">
                    <div class="row" style="margin-left:-4px;margin-right:-4px;">
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">ประเภทบัญชี</label>
                    @if (getDeptMaintype != null)
                    {
                    <select id="DeptMaintype" name="DeptMaintype" class="form-select"
                    @onchange="DeptMaintype">
                    <option value="null" selected>--กรุณาเลือก--</option>
                    @foreach (var MaintypeItem in getDeptMaintype)
                    {
                    <option value="@MaintypeItem.deptmain_type">
                    @MaintypeItem.deptmain_type - @MaintypeItem.deptmain_desc
                    </option>
                    }
                    </select>
                    }
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">เลขที่บัญชี</label>
                    <div class="form-group ">
                    <div class="input-group">
                    @* <input class="form-control" type="text" name="emp_name"
                    @bind-value="deptaccount_no">
                    <RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptaccount_No_fild"
                    Name="deptaccount_No_fild" class="form-control" />

                    </div>
                    </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">ชื่อบัญชี :</label>
                    <div class="form-group ">
                    <div class="input-group">
                    <input class="form-control" type="text" name="emp_name" @bind-value="deptaccount_name_fild">

                    </div>
                    </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">สถานะบัญชี</label>
                    <select class="form-select" @bind="deptclose_status">
                    <option Value="0">เปิดบัญชี</option>
                    <option Value="1">ปิดบัญชี</option>
                    </select>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">เลขที่สมาชิก</label>
                    <div class="form-group ">
                    <div class="input-group">
                    <input class="form-control" type="text" name="memb_name" @bind-value="member_no">

                    </div>
                    </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">เลขพนักงาน</label>
                    <div class="form-group ">
                    <div class="input-group">
                    <input class="form-control" type="text" name="salary_id" @bind-value="salary_id">
                    </div>
                    </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">ชื่อ</label>
                    <div class="form-group ">
                    <div class="input-group">
                    <input class="form-control" type="text" name="memb_name" @bind-value="memb_name">

                    </div>
                    </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">นามสกุล</label>
                    <div class="form-group ">
                    <div class="input-group">
                    <input class="form-control" type="text" name="memb_surname" @bind-value="memb_surname">
                    </div>
                    </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">บัตรประชาชน :</label>
                    <div class="form-group ">
                    <div class="input-group">
                    <input class="form-control" type="text" name="card_person" @bind-value="card_person">

                    </div>
                    </div>
                    </div>
                    <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">เบอร์โทรศัพท์ :</label>
                    <div class="form-group ">
                    <div class="input-group">
                    <input class="form-control" type="text" name="mem_telmobile" @bind-value="mem_telmobile">
                    </div>
                    </div>
                    </div>
                    <div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
                    <button class="btn btn-outline-secondary" @onclick="SearchOfGetAcc">
                    ค้นหา
                    </button>
                    </div>
                    </div>
                    <RadzenDataGrid Data="@dataaccDetails" TItem="Models.AccountDetails" ColumnWidth="200px"
                    AllowFiltering="true"
                    FilterPopupRenderMode="PopupRenderMode.OnDemand" FilterMode="FilterMode.Advanced"
                    IsLoading="@isLoadingModals"
                    PageSize="10" AllowPaging="true" AllowSorting="true" PagerHorizontalAlign="HorizontalAlign.Left"
                    ShowPagingSummary="true">
                    <Columns>
                    <RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails" Title="เลขที่บัญชี"
                    Property="deptaccount_no">
                    <Template>
                    <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                    @context.deptaccount_no
                    </div>
                    </Template>
                    </RadzenDataGridColumn>

                    <RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails" Title="ชื่อบัญชี"
                    Property="deptaccount_name">
                    <Template>
                    <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                    @context.deptaccount_name
                    </div>
                    </Template>
                    </RadzenDataGridColumn>
                    <RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails" Title="เลขสมาชิก"
                    Property="member_no">
                    <Template>
                    <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                    @context.member_no
                    </div>
                    </Template>
                    </RadzenDataGridColumn>
                    <RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails" Title=" ชื่อ -นามสกุล"
                    Property="full_name">
                    <Template>
                    <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                    @context.full_name
                    </div>
                    </Template>
                    </RadzenDataGridColumn>
                    </Columns>
                    </RadzenDataGrid>
                    </div> *@
                </div>
                <div class="col-xl-1 col-md-2 col-sm-6 d-flex flex-column">
                    <button type="button" class="btn btn-outline-secondary" @onclick="PerformSearch">
                        @if (isLoading)
                        {
                            <span>...</span>
                            <i class="fa fa-spinner fa-spin"></i>
                        }
                        else
                        {
                            <span>ค้นหา</span>
                        }
                    </button>
                </div>
                <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">ประเภทบัญชี</label>
                    <input class="form-control" readonly type="text" name="depttype_code" />
                </div>
                <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">เลขที่สมุด</label>
                    <RadzenMask Mask="*-****-*****-**-*" CharacterPattern="[0-9]" Name="deptpassbook_no"
                        class="form-control" />
                </div>
                <div class="col-xl-6 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">ชื่อบัญชี (TH)</label>
                    <input class="form-control" readonly type="text" name="deptaccount_name" />
                </div>
                <div class="col-xl-6 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">ชื่อบัญชี (EN)</label>
                    <input class="form-control" readonly type="text" name="deptaccount_ename" />
                </div>
                <div class="col-xl-9 col-md-6 col-sm-6 d-flex flex-column">
                    <label class="form-label" for="">เพื่อ</label>
                    <input class="form-control" readonly type="text" name="dept_objective" />
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-2"
        style="margin-left: calc(var(--bs-gutter-x) * .5);margin-right: calc(var(--bs-gutter-x) * .5);margin-bottom: 15px;">
        <RadzenTabs @bind-SelectedIndex=@selectedIndex>
            <Tabs>
                <RadzenTabsItem Text="ข้อมูลสมาชิก">
                    <label class="section-title" for="">เลขที่สมาชิก</label>
                    <div class="row header-title-row">
                        <div class="col-xl-3 col-md-4 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขที่สมาชิก</label>
                            <div class="form-group ">
                                <div class="input-group">
                                    <RadzenMask Mask="********" CharacterPattern="[0-9]" @bind-value="member_no"
                                        Name="member_no" class="form-control" />
                                    <div class="input-group-addon">
                                        <RadzenIcon class="icons icon-search" Icon="ballot" data-bs-toggle="modal"
                                            data-bs-target="#ModalSearch" />
                                    </div>
                                </div>
                            </div>
                            @* <div class="modal" tabindex="-1" id="ModalSearch">
                            <div class="modal-dialog modal-xl">
                            <div class="modal-content">
                            <!-- Modal Header -->
                            <div class="modal-header">
                            <h4 class="modal-title">ข้อมูลสมาชิก</h4>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <!-- Modal body -->
                            <div class="modal-body">
                            <div class="row" style="margin-left:-4px;margin-right:-4px;">
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ประเภทบัญชี</label>
                            @if (getDeptMaintype != null)
                            {
                            <select id="DeptMaintype" name="DeptMaintype" class="form-select"
                            @onchange="DeptMaintype">
                            <option value="null" selected>--กรุณาเลือก--</option>
                            @foreach (var MaintypeItem in getDeptMaintype)
                            {
                            <option value="@MaintypeItem.deptmain_type">
                            @MaintypeItem.deptmain_type - @MaintypeItem.deptmain_desc
                            </option>
                            }
                            </select>
                            }
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขที่บัญชี</label>
                            <div class="form-group ">
                            <div class="input-group">
                            @* <input class="form-control" type="text" name="emp_name"
                            @bind-value="deptaccount_no">
                            <RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptaccount_No_fild"
                            Name="deptaccount_No_fild" class="form-control" />

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ชื่อบัญชี :</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="emp_name" @bind-value="deptaccount_name_fild">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">สถานะบัญชี</label>
                            <select class="form-select" @bind="deptclose_status">
                            <option Value="0">เปิดบัญชี</option>
                            <option Value="1">ปิดบัญชี</option>
                            </select>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขที่สมาชิก</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="memb_name" @bind-value="member_no">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขพนักงาน</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="salary_id" @bind-value="salary_id">
                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ชื่อ</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="memb_name" @bind-value="memb_name">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">นามสกุล</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="memb_surname" @bind-value="memb_surname">
                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">บัตรประชาชน :</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="card_person" @bind-value="card_person">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เบอร์โทรศัพท์ :</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="mem_telmobile" @bind-value="mem_telmobile">
                            </div>
                            </div>
                            </div>
                            <div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
                            <button class="btn btn-outline-secondary" @onclick="SearchOfGetAcc">
                            ค้นหา
                            </button>
                            </div>
                            </div>
                            <RadzenDataGrid Data="@dataaccDetails" TItem="Models.AccountDetails" ColumnWidth="200px"
                            AllowFiltering="true"
                            FilterPopupRenderMode="PopupRenderMode.OnDemand" FilterMode="FilterMode.Advanced"
                            IsLoading="@isLoadingModals"
                            PageSize="10" AllowPaging="true" AllowSorting="true"
                            PagerHorizontalAlign="HorizontalAlign.Left"
                            ShowPagingSummary="true">
                            <Columns>
                            <RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails" Title="เลขที่บัญชี"
                            Property="deptaccount_no">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.deptaccount_no
                            </div>
                            </Template>
                            </RadzenDataGridColumn>

                            <RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails" Title="ชื่อบัญชี"
                            Property="deptaccount_name">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.deptaccount_name
                            </div>
                            </Template>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails" Title="เลขสมาชิก"
                            Property="member_no">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.member_no
                            </div>
                            </Template>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails" Title=" ชื่อ -นามสกุล"
                            Property="full_name">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.full_name
                            </div>
                            </Template>
                            </RadzenDataGridColumn>
                            </Columns>
                            </RadzenDataGrid>
                            </div> *@
                        </div>
                        <div class="col-xl-1 col-md-2 col-sm-6 d-flex flex-column">
                            <button type="button" class="btn btn-outline-secondary" @onclick="PerformSearch">
                                @if (isLoading)
                                {
                                    <span>...</span>
                                    <i class="fa fa-spinner fa-spin"></i>
                                }
                                else
                                {
                                    <span>ค้นหา</span>
                                }
                            </button>
                        </div>
                        <div class="col-xl-6 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ชื่อสมาชิก</label>
                            <input class="form-control" type="text" name="fullname" />
                        </div>
                    </div>
                    <label class="section-title" for="">ที่อยู่ตามทะเบียนบ้าน</label>
                    <div class="row header-title-row">
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ที่อยู่</label>
                            <input class="form-control" type="text" name="address_no" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">หมู่</label>
                            <input class="form-control" type="text" name="address_moo" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ซอย</label>
                            <input class="form-control" type="text" name="address_soi" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">หมู่บ้าน</label>
                            <input class="form-control" type="text" name="address_village" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ถนน</label>
                            <input class="form-control" type="text" name="address_road" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">จังหวัด</label>
                            <input class="form-control" type="text" name="province_desc" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เขต/อำเภอ</label>
                            <input class="form-control" type="text" name="district_desc" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">แขวง/ตำบล</label>
                            <input class="form-control" type="text" name="tambol_desc" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">รหัสไปรณีย์</label>
                            <input class="form-control" type="text" name="postcode" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">Email</label>
                            <input class="form-control" type="text" name="email" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">โทรศัพท์</label>
                            <input class="form-control" type="text" name="addr_phone" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">มือถือ</label>
                            <input class="form-control" type="text" name="addr_mobilephone" />
                        </div>
                    </div>
                </RadzenTabsItem>
                <RadzenTabsItem Text="ผู้ฝากร่วม/ ผู้รับโอนผลประโยชน์">
                    <div class="row">
                        <div class="col-xl-3 col-md-4 col-sm-6 d-flex flex-column">
                            <select class="form-select" name="" id="">
                                <option selected="selected" value="DEP">ผู้ฝากร่วม</option>
                                <option value="MEM">ผู้รับโอนผลประโยชน์</option>
                            </select>
                        </div>
                    </div>
                    <label class="section-title" for="">ผู้ฝากร่วม/ ผู้รับโอนผลประโยชน์ </label>
                    <div class="row header-title-row">
                        <button type="button" class="col-2 mt-2 mb-2 btn btn-outline-success">เพิ่มแถว</button>
                        <RadzenDataGrid Data="@statementDetails" TItem="Models.Statement_list" ColumnWidth="100%"
                            AllowColumnResize="true">
                            <Columns>
                                <RadzenDataGridColumn Width="8%" TItem="Models.Statement_list" Title="ลำดับ"
                                    Property="coop_id">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="14%" TItem="Models.Statement_list" Title="ประเภท"
                                    Property="operate_date">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="15%" TItem="Models.Statement_list" Title="เลขที่อ้าง"
                                    Property="operate_date">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="35%" TItem="Models.Statement_list" Title="ชื่อ - นามสกุล"
                                    Property="deptitemtype_code">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="20%" TItem="Models.Statement_list" Title="รายละเอียด	"
                                    Property="deptitemtype_code">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="8%" TItem="Models.Statement_list" Title="ลบ" Property="">
                                </RadzenDataGridColumn>
                            </Columns>
                        </RadzenDataGrid>
                    </div>
                </RadzenTabsItem>
                <RadzenTabsItem Text="เงื่อนไข">
                    <label class="section-title" for="">เงื่อนไข ภาษี/Int./Div.</label>
                    <div class="row header-title-row">
                        <div class="col-xl-3 col-md-4 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ประเภท</label>
                            <select class="form-select" name="spcint_rate_status" id="">
                                <option selected="selected" value="0">ตามประกาศ</option>
                                <option value="1">พิเศษคงที่</option>
                                <option value="2">พิเศษระบุวันที่มีผล</option>
                            </select>
                        </div>
                        <div class="col-xl-1 col-md-2 col-sm-6 d-flex flex-column">
                            <label class="form-label" style="color:transparent;" for="">ชื่อสมาชิก</label>
                            <div class="d-flex align-items-center">
                                <input class="form-control" type="text" name="fullname" placeholder="0.00" />
                                <span>%</span>
                            </div>
                        </div>
                        <div class="col-xl-8 col-md-4 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ประเภทผู้ถือ</label>
                            <select class="form-select" name="spcint_rate_status" id="">
                                <option selected="selected" value="01">เจ้าของคนเดียว</option>
                                <option value="02">บัญชีร่วม</option>
                                <option value="03">มัสยิด</option>
                                <option value="04">มูลนิธิ</option>
                                <option value="05">โรงเรียน</option>
                                <option value="06">สมาคม</option>
                                <option value="07">ห้างห้นส่วน</option>
                                <option value="08">บริษัท จำกัด</option>
                                <option value="09">บริษัท มหาช</option>
                                <option value="10">องค์กรรัฐบาล</option>
                                <option value="11">สหกรณ์</option>
                                <option value="12">กองทุน</option>
                                <option value="99">อื่นๆ</option>

                            </select>
                        </div>
                        <div class="col-xl-3 col-md-4 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">อัตราภาษี</label>
                            <select class="form-select" name="spcint_rate_status" id="">
                                <option selected="selected" value="0">ตามประกาศ</option>
                                <option value="1">กำหนดเอง</option>
                            </select>
                        </div>
                        <div class="col-xl-1 col-md-2 col-sm-6 d-flex flex-column">
                            <label class="form-label" style="color:transparent;" for="">ชื่อสมาชิก</label>
                            <div class="d-flex align-items-center">
                                <input class="form-control" type="text" name="fullname" placeholder="0.00" />
                                <span>%</span>
                            </div>
                        </div>
                        <div class="col-xl-8 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เงื่อนไข</label>
                            <input class="form-control" type="text" name="condforwithdraw" />
                        </div>
                    </div>
                    <label class="section-title" for="">การรับ Int./Div.</label>
                    <div class="row header-title-row">
                        <div class="col-xl-3 col-md-4 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">รับโดย</label>
                            <select class="form-select" name="spcint_rate_status" id="">
                                <option value="0">นำไปทบต้น</option>
                                <option value="1">โอนเข้าบัญชี</option>
                                <option selected="selected" value="2">โอนเข้าธนาคาร</option>
                                <option value="3">รับเองโดยแยกต้นเงิน</option>
                            </select>
                        </div>
                        <div class="col-xl-1 col-md-6 col-sm-6 d-flex flex-column">
                            <div class="form-check" style="margin-top: 35px;">
                                <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                                <label class="form-check-label" for="flexCheckDefault">จำกัด</label>
                            </div>
                        </div>
                        <div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" style="color: transparent;" for="">หมู่</label>
                            <input class="form-control" type="text" name="address_moo" placeholder="0.00" />
                        </div>
                        <div class="col-xl-3 col-md-4 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขที่สมาชิก</label>
                            <div class="form-group ">
                                <div class="input-group">
                                    <RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptaccount_no"
                                        Name="deptaccount_no" class="form-control" />
                                    <div class="input-group-addon">
                                        <RadzenIcon class="icons icon-search" Icon="ballot" data-bs-toggle="modal"
                                            data-bs-target="#ModalSearch" />
                                    </div>
                                </div>
                            </div>
                            @* <div class="modal" tabindex="-1" id="ModalSearch">
                            <div class="modal-dialog modal-xl">
                            <div class="modal-content">
                            <!-- Modal Header -->
                            <div class="modal-header">
                            <h4 class="modal-title">ข้อมูลสมาชิก</h4>
                            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <!-- Modal body -->
                            <div class="modal-body">
                            <div class="row" style="margin-left:-4px;margin-right:-4px;">
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ประเภทบัญชี</label>
                            @if (getDeptMaintype != null)
                            {
                            <select id="DeptMaintype" name="DeptMaintype" class="form-select"
                            @onchange="DeptMaintype">
                            <option value="null" selected>--กรุณาเลือก--</option>
                            @foreach (var MaintypeItem in getDeptMaintype)
                            {
                            <option value="@MaintypeItem.deptmain_type">
                            @MaintypeItem.deptmain_type - @MaintypeItem.deptmain_desc
                            </option>
                            }
                            </select>
                            }
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขที่บัญชี</label>
                            <div class="form-group ">
                            <div class="input-group">
                            @* <input class="form-control" type="text" name="emp_name"
                            @bind-value="deptaccount_no">
                            <RadzenMask Mask="**-********" CharacterPattern="[0-9]" @bind-value="deptaccount_No_fild"
                            Name="deptaccount_No_fild" class="form-control" />

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ชื่อบัญชี :</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="emp_name" @bind-value="deptaccount_name_fild">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">สถานะบัญชี</label>
                            <select class="form-select" @bind="deptclose_status">
                            <option Value="0">เปิดบัญชี</option>
                            <option Value="1">ปิดบัญชี</option>
                            </select>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขที่สมาชิก</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="memb_name" @bind-value="member_no">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขพนักงาน</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="salary_id" @bind-value="salary_id">
                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ชื่อ</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="memb_name" @bind-value="memb_name">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">นามสกุล</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="memb_surname" @bind-value="memb_surname">
                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">บัตรประชาชน :</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="card_person" @bind-value="card_person">

                            </div>
                            </div>
                            </div>
                            <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เบอร์โทรศัพท์ :</label>
                            <div class="form-group ">
                            <div class="input-group">
                            <input class="form-control" type="text" name="mem_telmobile" @bind-value="mem_telmobile">
                            </div>
                            </div>
                            </div>
                            <div class="col-xl-2 col-md-6 col-sm-6 d-flex flex-column">
                            <button class="btn btn-outline-secondary" @onclick="SearchOfGetAcc">
                            ค้นหา
                            </button>
                            </div>
                            </div>
                            <RadzenDataGrid Data="@dataaccDetails" TItem="Models.AccountDetails" ColumnWidth="200px"
                            AllowFiltering="true"
                            FilterPopupRenderMode="PopupRenderMode.OnDemand" FilterMode="FilterMode.Advanced"
                            IsLoading="@isLoadingModals"
                            PageSize="10" AllowPaging="true" AllowSorting="true"
                            PagerHorizontalAlign="HorizontalAlign.Left"
                            ShowPagingSummary="true">
                            <Columns>
                            <RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails" Title="เลขที่บัญชี"
                            Property="deptaccount_no">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.deptaccount_no
                            </div>
                            </Template>
                            </RadzenDataGridColumn>

                            <RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails" Title="ชื่อบัญชี"
                            Property="deptaccount_name">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.deptaccount_name
                            </div>
                            </Template>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn Width="20%" TItem="Models.AccountDetails" Title="เลขสมาชิก"
                            Property="member_no">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.member_no
                            </div>
                            </Template>
                            </RadzenDataGridColumn>
                            <RadzenDataGridColumn Width="30%" TItem="Models.AccountDetails" Title=" ชื่อ -นามสกุล"
                            Property="full_name">
                            <Template>
                            <div @onclick="@(e => UpdateAccountDetails(context))" data-bs-dismiss="modal">
                            @context.full_name
                            </div>
                            </Template>
                            </RadzenDataGridColumn>
                            </Columns>
                            </RadzenDataGrid>
                            </div> *@
                        </div>
                        <div class="col-xl-1 col-md-2 col-sm-6 d-flex flex-column">
                            <button type="button" class="btn btn-outline-secondary" @onclick="PerformSearch">
                                @if (isLoading)
                                {
                                    <span>...</span>
                                    <i class="fa fa-spinner fa-spin"></i>
                                }
                                else
                                {
                                    <span>ค้นหา</span>
                                }
                            </button>
                        </div>
                        <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">เลขที่บัญชีธนาคาร</label>
                            <input class="form-control" type="text" name="tran_bankacc_no" />
                        </div>
                        <div class="col-xl-8 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ชื่อบัญชี</label>
                            <input class="form-control" type="text" name="dept_tranacc_name" />
                        </div>
                        @* <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                        <label class="form-label" for="">ธนาคาร</label>
                        <input class="form-control" type="text" name="bank_code" />
                        </div> *@
                        <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ธนาคาร</label>
                            <div class="form-group ">
                                <div class="input-group">
                                    <input class="format-money form-control" type="text"
                                        style="text-align: center; width: 30%;" name="bank_code" />
                                    @* <input class="format-money form-control" type="text"
                                    style="text-align: center; width: 30%;" name="bank_code" value="@bank_code"
                                    @oninput="OnGetBankChanged" /> *@
                                    <select id="getBankSelect" class="form-select" style="width: 70%;">
                                        <option selected disabled>--กรุณาเลือก--</option>
                                    </select>
                                    @* <select id="getBankSelect" class="form-select" @onchange="OnGetBankSelectChanged"
                                    style="width: 70%;">
                                    <option selected disabled>--กรุณาเลือก--</option>
                                    @foreach (var getBankItem in getBank)
                                    {
                                    bool isCurrentOptionSelected = getBankItem.bank_code == BankValues;
                                    <option value="@getBankItem.bank_code" selected="@isCurrentOptionSelected">
                                    @getBankItem.bank_code - @getBankItem.bank_desc
                                    </option>
                                    }
                                    </select> *@
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">สาขา</label>
                            <div class="form-group ">
                                <div class="input-group">
                                    <input class="format-money form-control" type="text"
                                        style="text-align: center; width: 30%;" name="bank_code" />
                                    @* <input class="format-money form-control" type="text"
                                    style="text-align: center; width: 30%;" disabled="@(bankBranch == null)"
                                    name="bank_code" value="@bankbranch_code" @oninput="OnBankBranchChanged" /> *@
                                    @* @if (bankBranch == null)
                                    { *@
                                    <select id="getBankSelect" disabled class="form-select" name="bank_branch"
                                        style="width: 70%;">
                                        <option value=""></option>
                                    </select>
                                    @* }
                                    else
                                    {
                                    <select id="getBankSelect" name="bank_branch" class="form-select"
                                    @onchange="OnBankBranchSelectChanged"
                                    style="width: 70%;">
                                    <option selected disabled>--กรุณาเลือก--</option>
                                    @foreach (var bankBranchItem in bankBranch)
                                    {
                                    bool isCurrentOptionSelected = bankBranchItem.branch_id == BankBranchValues;
                                    <option value="@bankBranchItem.branch_id" selected="@isCurrentOptionSelected">
                                    @bankBranchItem.branch_id - @bankBranchItem.branch_name
                                    </option>
                                    }
                                    </select>
                                    } *@
                                </div>
                            </div>
                        </div>
                    </div>
                    <label class="section-title" for="">รายละเอียดบัญชี</label>
                    <div class="row header-title-row">
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">ต้นเงิน</label>
                            <input class="form-control" type="text" name="prnc_no" />
                        </div>
                        <div class="col-xl-3 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">รายการเคลื่อนไหว</label>
                            <input class="form-control" type="text" name="laststmseq_no" />
                        </div>
                    </div>

                </RadzenTabsItem>
                <RadzenTabsItem Text="การตัดโอนบัญชี">
                    <div class="row">
                        <button type="button" class="col-2 mt-2 mb-2 btn btn-outline-success">เพิ่มแถว</button>
                        <RadzenDataGrid Data="@statementDetails" TItem="Models.Statement_list" ColumnWidth="100%"
                            AllowColumnResize="true">
                            <Columns>
                                <RadzenDataGridColumn Width="5%" TItem="Models.Statement_list" Title="ลำดับ"
                                    Property="coop_id">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="10%" TItem="Models.Statement_list" Title="วันที่โอน"
                                    Property="operate_date">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="10%" TItem="Models.Statement_list" Title="เลขที่บัญชี"
                                    Property="deptitemtype_code">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="5%" TItem="Models.Statement_list" Title="..."
                                    Property="withdraw_amt">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="12%" TItem="Models.Statement_list" Title="ชื่อเลขที่บัญชี"
                                    Property="deposit_amt">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="10%" TItem="Models.Statement_list" Title="จำนวนครั้งการโอน"
                                    Property="deposit_amt">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="12%" TItem="Models.Statement_list" Title="ยอดเงิน"
                                    Property="deposit_amt">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="10%" TItem="Models.Statement_list" Title="สถาณะ"
                                    Property="deposit_amt">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="10%" TItem="Models.Statement_list" Title="จำนวนครั้งผ่านรายการ"
                                    Property="deposit_amt">
                                </RadzenDataGridColumn>
                                <RadzenDataGridColumn Width="5%" TItem="Models.Statement_list"Title="ลบ" Property="ลบ">
                                </RadzenDataGridColumn>
                            </Columns>
                        </RadzenDataGrid>
                    </div>
                </RadzenTabsItem>
                <RadzenTabsItem Text="จับคู่ธนาคารเพื่อ ATM">
                    <div class="row">
                        <div class="col-xl-4 col-md-6 col-sm-6 d-flex flex-column">
                            <label class="form-label" for="">บัญชีธนาคารเลขที่</label>
                            <input class="form-control" type="text" name="bank_accid" />
                        </div>
                    </div>
                </RadzenTabsItem>
            </Tabs>
        </RadzenTabs>
    </div>
</div>

@code {

}